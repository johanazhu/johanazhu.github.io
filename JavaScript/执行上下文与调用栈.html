<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>执行上下文与调用栈 | 五年前端三年面试</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?ba0bbc21ba293c7cf67f60c2d4889ee5";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
          </script>
    <meta name="description" content="前端知识地图">
    <meta name="robots" content="all">
    <meta name="author" content="johan">
    <meta name="keywords" content="jahan johnnyjoestar azhubaby js react webpack babel browser html css jquery git http docker weapp wxapp flutter RN designPattern cssbasic about JavaScript学习路线 JavaScript知识体系 React框架 前端的一切 前端面试 知识体系 前端工程化 大前端">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.2ef34e86.css" as="style"><link rel="preload" href="/assets/js/app.ef9d35bd.js" as="script"><link rel="preload" href="/assets/js/2.e1bdf339.js" as="script"><link rel="preload" href="/assets/js/7.0023e9f0.js" as="script"><link rel="prefetch" href="/assets/js/10.3d41901d.js"><link rel="prefetch" href="/assets/js/100.507e9466.js"><link rel="prefetch" href="/assets/js/101.0f09bec5.js"><link rel="prefetch" href="/assets/js/102.450280dc.js"><link rel="prefetch" href="/assets/js/103.ccf30a8f.js"><link rel="prefetch" href="/assets/js/104.13142748.js"><link rel="prefetch" href="/assets/js/105.042b21fc.js"><link rel="prefetch" href="/assets/js/106.c2220f74.js"><link rel="prefetch" href="/assets/js/107.83629a47.js"><link rel="prefetch" href="/assets/js/108.a76eb872.js"><link rel="prefetch" href="/assets/js/109.bdcb62f0.js"><link rel="prefetch" href="/assets/js/11.af7e5b92.js"><link rel="prefetch" href="/assets/js/110.109255dc.js"><link rel="prefetch" href="/assets/js/111.32929fee.js"><link rel="prefetch" href="/assets/js/112.099b9b0e.js"><link rel="prefetch" href="/assets/js/113.b2741a79.js"><link rel="prefetch" href="/assets/js/114.fed00d7a.js"><link rel="prefetch" href="/assets/js/115.51bb1e16.js"><link rel="prefetch" href="/assets/js/116.08c784c2.js"><link rel="prefetch" href="/assets/js/117.70a718ca.js"><link rel="prefetch" href="/assets/js/118.0900c81b.js"><link rel="prefetch" href="/assets/js/119.cbbc59c6.js"><link rel="prefetch" href="/assets/js/12.bc6bdb5f.js"><link rel="prefetch" href="/assets/js/120.19e901ca.js"><link rel="prefetch" href="/assets/js/121.650baa2c.js"><link rel="prefetch" href="/assets/js/122.bf335119.js"><link rel="prefetch" href="/assets/js/123.71ef2cfe.js"><link rel="prefetch" href="/assets/js/124.f11d194d.js"><link rel="prefetch" href="/assets/js/125.3d8cf898.js"><link rel="prefetch" href="/assets/js/126.f240b37b.js"><link rel="prefetch" href="/assets/js/127.151a57ab.js"><link rel="prefetch" href="/assets/js/128.15652faf.js"><link rel="prefetch" href="/assets/js/129.d9eefee0.js"><link rel="prefetch" href="/assets/js/13.4043de3e.js"><link rel="prefetch" href="/assets/js/130.1e7f4d71.js"><link rel="prefetch" href="/assets/js/131.5e873226.js"><link rel="prefetch" href="/assets/js/132.be45912b.js"><link rel="prefetch" href="/assets/js/133.222788d2.js"><link rel="prefetch" href="/assets/js/134.40b2bd0a.js"><link rel="prefetch" href="/assets/js/135.e2364b2b.js"><link rel="prefetch" href="/assets/js/136.67bfbb47.js"><link rel="prefetch" href="/assets/js/137.8ba12a2f.js"><link rel="prefetch" href="/assets/js/138.612a5a5f.js"><link rel="prefetch" href="/assets/js/139.990dee41.js"><link rel="prefetch" href="/assets/js/14.1ea07c01.js"><link rel="prefetch" href="/assets/js/140.93c69cb7.js"><link rel="prefetch" href="/assets/js/141.7832dae2.js"><link rel="prefetch" href="/assets/js/142.57b00d9a.js"><link rel="prefetch" href="/assets/js/143.eee9bda8.js"><link rel="prefetch" href="/assets/js/144.cae93907.js"><link rel="prefetch" href="/assets/js/145.0d3824f3.js"><link rel="prefetch" href="/assets/js/146.c6e772f8.js"><link rel="prefetch" href="/assets/js/147.005e8b4e.js"><link rel="prefetch" href="/assets/js/148.64fbd2cc.js"><link rel="prefetch" href="/assets/js/149.ca8875f4.js"><link rel="prefetch" href="/assets/js/15.ed1a5e6b.js"><link rel="prefetch" href="/assets/js/150.5640293a.js"><link rel="prefetch" href="/assets/js/151.41b60dd2.js"><link rel="prefetch" href="/assets/js/152.b9a724f7.js"><link rel="prefetch" href="/assets/js/153.ca126d3f.js"><link rel="prefetch" href="/assets/js/154.a4d6a5a9.js"><link rel="prefetch" href="/assets/js/155.8c790db6.js"><link rel="prefetch" href="/assets/js/156.3c956bcf.js"><link rel="prefetch" href="/assets/js/157.0323b9a7.js"><link rel="prefetch" href="/assets/js/158.60f69520.js"><link rel="prefetch" href="/assets/js/159.bbb68514.js"><link rel="prefetch" href="/assets/js/16.b59bc9ab.js"><link rel="prefetch" href="/assets/js/160.137cbf20.js"><link rel="prefetch" href="/assets/js/161.585051f2.js"><link rel="prefetch" href="/assets/js/162.51f8716a.js"><link rel="prefetch" href="/assets/js/163.e2db1048.js"><link rel="prefetch" href="/assets/js/164.3f96e78f.js"><link rel="prefetch" href="/assets/js/165.1e5c4fd3.js"><link rel="prefetch" href="/assets/js/166.63f156e0.js"><link rel="prefetch" href="/assets/js/167.81f6f2ec.js"><link rel="prefetch" href="/assets/js/168.9d19c4fe.js"><link rel="prefetch" href="/assets/js/169.37d8efbc.js"><link rel="prefetch" href="/assets/js/17.d41916be.js"><link rel="prefetch" href="/assets/js/170.70da897f.js"><link rel="prefetch" href="/assets/js/171.71b0a5f7.js"><link rel="prefetch" href="/assets/js/172.262ce91a.js"><link rel="prefetch" href="/assets/js/173.3f57787f.js"><link rel="prefetch" href="/assets/js/174.af3407d1.js"><link rel="prefetch" href="/assets/js/175.a17ac4f9.js"><link rel="prefetch" href="/assets/js/176.0fd60a22.js"><link rel="prefetch" href="/assets/js/177.4c422d27.js"><link rel="prefetch" href="/assets/js/178.8c7e991d.js"><link rel="prefetch" href="/assets/js/179.e6f0a9b7.js"><link rel="prefetch" href="/assets/js/18.4fbf0976.js"><link rel="prefetch" href="/assets/js/180.a4014bfe.js"><link rel="prefetch" href="/assets/js/181.6a375527.js"><link rel="prefetch" href="/assets/js/182.50524e11.js"><link rel="prefetch" href="/assets/js/183.43384392.js"><link rel="prefetch" href="/assets/js/184.ef8f0290.js"><link rel="prefetch" href="/assets/js/185.476ae5ee.js"><link rel="prefetch" href="/assets/js/186.21c5716b.js"><link rel="prefetch" href="/assets/js/187.b8f569d4.js"><link rel="prefetch" href="/assets/js/188.70794795.js"><link rel="prefetch" href="/assets/js/189.e98d8337.js"><link rel="prefetch" href="/assets/js/19.e55b2294.js"><link rel="prefetch" href="/assets/js/190.0b7d192a.js"><link rel="prefetch" href="/assets/js/191.54e45958.js"><link rel="prefetch" href="/assets/js/192.bc4196ec.js"><link rel="prefetch" href="/assets/js/193.96691915.js"><link rel="prefetch" href="/assets/js/194.d629fadb.js"><link rel="prefetch" href="/assets/js/195.ab9c69da.js"><link rel="prefetch" href="/assets/js/196.91d633c7.js"><link rel="prefetch" href="/assets/js/197.1f2807e8.js"><link rel="prefetch" href="/assets/js/198.6e27fb0b.js"><link rel="prefetch" href="/assets/js/199.859686cf.js"><link rel="prefetch" href="/assets/js/20.c4876afa.js"><link rel="prefetch" href="/assets/js/200.c1f6d52a.js"><link rel="prefetch" href="/assets/js/201.36222579.js"><link rel="prefetch" href="/assets/js/202.7e61abc3.js"><link rel="prefetch" href="/assets/js/203.559d58b5.js"><link rel="prefetch" href="/assets/js/204.03d2002d.js"><link rel="prefetch" href="/assets/js/205.0eb41857.js"><link rel="prefetch" href="/assets/js/206.e5eaa745.js"><link rel="prefetch" href="/assets/js/207.33f59629.js"><link rel="prefetch" href="/assets/js/208.2e6b781d.js"><link rel="prefetch" href="/assets/js/209.f2018a64.js"><link rel="prefetch" href="/assets/js/21.898c5f25.js"><link rel="prefetch" href="/assets/js/210.d189cca3.js"><link rel="prefetch" href="/assets/js/211.9d1b2636.js"><link rel="prefetch" href="/assets/js/212.76b2fdd1.js"><link rel="prefetch" href="/assets/js/213.e12b5a4b.js"><link rel="prefetch" href="/assets/js/214.72cbe2fb.js"><link rel="prefetch" href="/assets/js/215.c8ba2382.js"><link rel="prefetch" href="/assets/js/216.96f76959.js"><link rel="prefetch" href="/assets/js/217.68a2fe0a.js"><link rel="prefetch" href="/assets/js/218.9525ad0d.js"><link rel="prefetch" href="/assets/js/219.f98b477c.js"><link rel="prefetch" href="/assets/js/22.a14f904f.js"><link rel="prefetch" href="/assets/js/220.406563bf.js"><link rel="prefetch" href="/assets/js/221.9705676d.js"><link rel="prefetch" href="/assets/js/222.ba9b7927.js"><link rel="prefetch" href="/assets/js/223.a8f698fd.js"><link rel="prefetch" href="/assets/js/224.3c51c151.js"><link rel="prefetch" href="/assets/js/225.a5915759.js"><link rel="prefetch" href="/assets/js/226.4a17e78f.js"><link rel="prefetch" href="/assets/js/227.9c4fb3a8.js"><link rel="prefetch" href="/assets/js/228.450c703a.js"><link rel="prefetch" href="/assets/js/229.73479ff1.js"><link rel="prefetch" href="/assets/js/23.a7f6c377.js"><link rel="prefetch" href="/assets/js/230.94856624.js"><link rel="prefetch" href="/assets/js/231.193d811c.js"><link rel="prefetch" href="/assets/js/232.1fc7497f.js"><link rel="prefetch" href="/assets/js/233.33fe83dd.js"><link rel="prefetch" href="/assets/js/234.f62959d3.js"><link rel="prefetch" href="/assets/js/235.61b11ce7.js"><link rel="prefetch" href="/assets/js/236.bbbcba04.js"><link rel="prefetch" href="/assets/js/237.c7933942.js"><link rel="prefetch" href="/assets/js/238.89f7d906.js"><link rel="prefetch" href="/assets/js/239.4212ba93.js"><link rel="prefetch" href="/assets/js/24.888d3e1e.js"><link rel="prefetch" href="/assets/js/240.cb96c2f7.js"><link rel="prefetch" href="/assets/js/241.857201e9.js"><link rel="prefetch" href="/assets/js/242.df52ec5b.js"><link rel="prefetch" href="/assets/js/243.929eed31.js"><link rel="prefetch" href="/assets/js/244.d1717da6.js"><link rel="prefetch" href="/assets/js/245.99937480.js"><link rel="prefetch" href="/assets/js/246.4cce0bd2.js"><link rel="prefetch" href="/assets/js/247.a4ad0b2a.js"><link rel="prefetch" href="/assets/js/248.be37f85e.js"><link rel="prefetch" href="/assets/js/249.63943607.js"><link rel="prefetch" href="/assets/js/25.f7e80758.js"><link rel="prefetch" href="/assets/js/250.2c76ccbd.js"><link rel="prefetch" href="/assets/js/251.238057af.js"><link rel="prefetch" href="/assets/js/252.bef0f088.js"><link rel="prefetch" href="/assets/js/253.8f80aea3.js"><link rel="prefetch" href="/assets/js/254.5cc0989d.js"><link rel="prefetch" href="/assets/js/255.9fe74df0.js"><link rel="prefetch" href="/assets/js/256.22ba1957.js"><link rel="prefetch" href="/assets/js/257.e97dce77.js"><link rel="prefetch" href="/assets/js/258.4314d86c.js"><link rel="prefetch" href="/assets/js/259.ac84feb1.js"><link rel="prefetch" href="/assets/js/26.d1a90f3f.js"><link rel="prefetch" href="/assets/js/260.f21e69c7.js"><link rel="prefetch" href="/assets/js/261.40f56531.js"><link rel="prefetch" href="/assets/js/262.458cb8f0.js"><link rel="prefetch" href="/assets/js/263.3bf7b9b1.js"><link rel="prefetch" href="/assets/js/264.870f9475.js"><link rel="prefetch" href="/assets/js/265.9ce46c11.js"><link rel="prefetch" href="/assets/js/266.72960386.js"><link rel="prefetch" href="/assets/js/267.b7bb1562.js"><link rel="prefetch" href="/assets/js/268.a84bdaca.js"><link rel="prefetch" href="/assets/js/269.808c34f8.js"><link rel="prefetch" href="/assets/js/27.e85c0962.js"><link rel="prefetch" href="/assets/js/270.9db7450b.js"><link rel="prefetch" href="/assets/js/271.1e477572.js"><link rel="prefetch" href="/assets/js/272.4c87e510.js"><link rel="prefetch" href="/assets/js/273.e9e6d349.js"><link rel="prefetch" href="/assets/js/274.2e7e58dd.js"><link rel="prefetch" href="/assets/js/275.3103bb7d.js"><link rel="prefetch" href="/assets/js/276.3f8aab4d.js"><link rel="prefetch" href="/assets/js/277.bfecb932.js"><link rel="prefetch" href="/assets/js/278.b41dbb75.js"><link rel="prefetch" href="/assets/js/279.e688b416.js"><link rel="prefetch" href="/assets/js/28.61e69532.js"><link rel="prefetch" href="/assets/js/280.f6a76aba.js"><link rel="prefetch" href="/assets/js/281.6f161636.js"><link rel="prefetch" href="/assets/js/282.51fd322c.js"><link rel="prefetch" href="/assets/js/283.56442225.js"><link rel="prefetch" href="/assets/js/284.a344bdb5.js"><link rel="prefetch" href="/assets/js/285.35574c84.js"><link rel="prefetch" href="/assets/js/286.d46f2394.js"><link rel="prefetch" href="/assets/js/287.0fd17033.js"><link rel="prefetch" href="/assets/js/288.f003875b.js"><link rel="prefetch" href="/assets/js/289.629f65ec.js"><link rel="prefetch" href="/assets/js/29.a2a57baa.js"><link rel="prefetch" href="/assets/js/290.ef6ddaf5.js"><link rel="prefetch" href="/assets/js/291.0e845d37.js"><link rel="prefetch" href="/assets/js/292.640da594.js"><link rel="prefetch" href="/assets/js/293.3ae03be0.js"><link rel="prefetch" href="/assets/js/294.a654ccb7.js"><link rel="prefetch" href="/assets/js/295.5513b632.js"><link rel="prefetch" href="/assets/js/296.e4104532.js"><link rel="prefetch" href="/assets/js/297.21070b93.js"><link rel="prefetch" href="/assets/js/298.dbc5b754.js"><link rel="prefetch" href="/assets/js/299.0aea197d.js"><link rel="prefetch" href="/assets/js/3.401e6c44.js"><link rel="prefetch" href="/assets/js/30.52001783.js"><link rel="prefetch" href="/assets/js/300.1f21f9df.js"><link rel="prefetch" href="/assets/js/301.daf34ee7.js"><link rel="prefetch" href="/assets/js/302.a248ddfd.js"><link rel="prefetch" href="/assets/js/303.441240e2.js"><link rel="prefetch" href="/assets/js/304.2e4c5798.js"><link rel="prefetch" href="/assets/js/305.3e1e0d29.js"><link rel="prefetch" href="/assets/js/306.55e6ed2b.js"><link rel="prefetch" href="/assets/js/307.53db363e.js"><link rel="prefetch" href="/assets/js/308.c6a52cbf.js"><link rel="prefetch" href="/assets/js/309.c2b1fc5b.js"><link rel="prefetch" href="/assets/js/31.c8e71192.js"><link rel="prefetch" href="/assets/js/310.13df495d.js"><link rel="prefetch" href="/assets/js/311.0ef37d7e.js"><link rel="prefetch" href="/assets/js/312.a14bd79f.js"><link rel="prefetch" href="/assets/js/313.4fbea31f.js"><link rel="prefetch" href="/assets/js/314.21e26670.js"><link rel="prefetch" href="/assets/js/315.aab48380.js"><link rel="prefetch" href="/assets/js/316.c3213fe9.js"><link rel="prefetch" href="/assets/js/317.ecefa6ee.js"><link rel="prefetch" href="/assets/js/318.cdde5bd3.js"><link rel="prefetch" href="/assets/js/319.5ea8bab9.js"><link rel="prefetch" href="/assets/js/32.01eaf4be.js"><link rel="prefetch" href="/assets/js/320.97375bde.js"><link rel="prefetch" href="/assets/js/321.85167226.js"><link rel="prefetch" href="/assets/js/322.b8efbbd6.js"><link rel="prefetch" href="/assets/js/323.8c205320.js"><link rel="prefetch" href="/assets/js/324.514fb663.js"><link rel="prefetch" href="/assets/js/325.a8557ed8.js"><link rel="prefetch" href="/assets/js/326.98d98ff3.js"><link rel="prefetch" href="/assets/js/327.1c354d9a.js"><link rel="prefetch" href="/assets/js/328.27cc9f65.js"><link rel="prefetch" href="/assets/js/329.8cf4ce1a.js"><link rel="prefetch" href="/assets/js/33.34736b8a.js"><link rel="prefetch" href="/assets/js/330.f1113fec.js"><link rel="prefetch" href="/assets/js/331.3b6d7238.js"><link rel="prefetch" href="/assets/js/332.6d9cfab5.js"><link rel="prefetch" href="/assets/js/333.271a0dcc.js"><link rel="prefetch" href="/assets/js/334.46a9f606.js"><link rel="prefetch" href="/assets/js/335.7ea75e31.js"><link rel="prefetch" href="/assets/js/336.f2c94806.js"><link rel="prefetch" href="/assets/js/337.31e3e170.js"><link rel="prefetch" href="/assets/js/338.251da9a2.js"><link rel="prefetch" href="/assets/js/339.b834a391.js"><link rel="prefetch" href="/assets/js/34.23e10f90.js"><link rel="prefetch" href="/assets/js/340.05856063.js"><link rel="prefetch" href="/assets/js/341.ea3f89d9.js"><link rel="prefetch" href="/assets/js/342.74fc2f7b.js"><link rel="prefetch" href="/assets/js/343.80895cba.js"><link rel="prefetch" href="/assets/js/344.c05eec87.js"><link rel="prefetch" href="/assets/js/345.ee810eea.js"><link rel="prefetch" href="/assets/js/346.ec135f6f.js"><link rel="prefetch" href="/assets/js/347.adb805d0.js"><link rel="prefetch" href="/assets/js/348.0da2ddee.js"><link rel="prefetch" href="/assets/js/349.de50f67d.js"><link rel="prefetch" href="/assets/js/35.9b51b726.js"><link rel="prefetch" href="/assets/js/350.f92c5361.js"><link rel="prefetch" href="/assets/js/351.72707290.js"><link rel="prefetch" href="/assets/js/352.1f0edd1c.js"><link rel="prefetch" href="/assets/js/353.5f9c19dd.js"><link rel="prefetch" href="/assets/js/354.b2939eae.js"><link rel="prefetch" href="/assets/js/355.727dbfdc.js"><link rel="prefetch" href="/assets/js/356.dafcbaec.js"><link rel="prefetch" href="/assets/js/357.affdfbc2.js"><link rel="prefetch" href="/assets/js/358.e2411dac.js"><link rel="prefetch" href="/assets/js/359.23312243.js"><link rel="prefetch" href="/assets/js/36.1ccaa7bc.js"><link rel="prefetch" href="/assets/js/360.2c11356f.js"><link rel="prefetch" href="/assets/js/361.39497448.js"><link rel="prefetch" href="/assets/js/362.fb557c89.js"><link rel="prefetch" href="/assets/js/363.a878b9e8.js"><link rel="prefetch" href="/assets/js/364.36d38090.js"><link rel="prefetch" href="/assets/js/365.78b95b94.js"><link rel="prefetch" href="/assets/js/366.79ca52d0.js"><link rel="prefetch" href="/assets/js/367.31ef03a5.js"><link rel="prefetch" href="/assets/js/368.af7b849c.js"><link rel="prefetch" href="/assets/js/369.1f35dbad.js"><link rel="prefetch" href="/assets/js/37.e7aec5aa.js"><link rel="prefetch" href="/assets/js/370.a6b4f300.js"><link rel="prefetch" href="/assets/js/371.a1a0b903.js"><link rel="prefetch" href="/assets/js/372.1bf00399.js"><link rel="prefetch" href="/assets/js/373.7abab42f.js"><link rel="prefetch" href="/assets/js/374.c78c3481.js"><link rel="prefetch" href="/assets/js/375.0c6aa4e0.js"><link rel="prefetch" href="/assets/js/376.0231e740.js"><link rel="prefetch" href="/assets/js/377.6451d5a5.js"><link rel="prefetch" href="/assets/js/378.3391bd02.js"><link rel="prefetch" href="/assets/js/379.974140d3.js"><link rel="prefetch" href="/assets/js/38.458c1fe2.js"><link rel="prefetch" href="/assets/js/380.79d31d39.js"><link rel="prefetch" href="/assets/js/381.65000261.js"><link rel="prefetch" href="/assets/js/382.a5b2527c.js"><link rel="prefetch" href="/assets/js/383.ca0af941.js"><link rel="prefetch" href="/assets/js/384.77f7ec34.js"><link rel="prefetch" href="/assets/js/385.4a90ceec.js"><link rel="prefetch" href="/assets/js/386.cdad8269.js"><link rel="prefetch" href="/assets/js/387.7a86de80.js"><link rel="prefetch" href="/assets/js/388.0c98ba01.js"><link rel="prefetch" href="/assets/js/389.08d80fe4.js"><link rel="prefetch" href="/assets/js/39.2629417e.js"><link rel="prefetch" href="/assets/js/390.6f07f986.js"><link rel="prefetch" href="/assets/js/391.e9b7a13f.js"><link rel="prefetch" href="/assets/js/392.576409ef.js"><link rel="prefetch" href="/assets/js/393.8ea15ed1.js"><link rel="prefetch" href="/assets/js/394.8e439224.js"><link rel="prefetch" href="/assets/js/395.05add058.js"><link rel="prefetch" href="/assets/js/396.72358bd6.js"><link rel="prefetch" href="/assets/js/397.a71c93db.js"><link rel="prefetch" href="/assets/js/398.1c2fa760.js"><link rel="prefetch" href="/assets/js/399.9dd8501f.js"><link rel="prefetch" href="/assets/js/4.2b5075f0.js"><link rel="prefetch" href="/assets/js/40.d05ce2aa.js"><link rel="prefetch" href="/assets/js/400.0a5023b7.js"><link rel="prefetch" href="/assets/js/401.f507fdbe.js"><link rel="prefetch" href="/assets/js/402.a1cd25c2.js"><link rel="prefetch" href="/assets/js/403.ef23b4fe.js"><link rel="prefetch" href="/assets/js/404.e7daea5c.js"><link rel="prefetch" href="/assets/js/405.b175bbc9.js"><link rel="prefetch" href="/assets/js/406.5518095b.js"><link rel="prefetch" href="/assets/js/407.0586de93.js"><link rel="prefetch" href="/assets/js/408.bb7ee1ec.js"><link rel="prefetch" href="/assets/js/409.1ef0be22.js"><link rel="prefetch" href="/assets/js/41.3fb0369e.js"><link rel="prefetch" href="/assets/js/410.961df569.js"><link rel="prefetch" href="/assets/js/411.486c594a.js"><link rel="prefetch" href="/assets/js/412.addab977.js"><link rel="prefetch" href="/assets/js/413.637b84a7.js"><link rel="prefetch" href="/assets/js/414.dbb5a30d.js"><link rel="prefetch" href="/assets/js/415.2ab9d283.js"><link rel="prefetch" href="/assets/js/416.70a5f76a.js"><link rel="prefetch" href="/assets/js/417.1036770d.js"><link rel="prefetch" href="/assets/js/418.59f2137b.js"><link rel="prefetch" href="/assets/js/419.066057f8.js"><link rel="prefetch" href="/assets/js/42.804381a7.js"><link rel="prefetch" href="/assets/js/420.ed76a143.js"><link rel="prefetch" href="/assets/js/421.c9eb3d41.js"><link rel="prefetch" href="/assets/js/422.e818de82.js"><link rel="prefetch" href="/assets/js/423.0db84e35.js"><link rel="prefetch" href="/assets/js/424.794d2373.js"><link rel="prefetch" href="/assets/js/425.12213f50.js"><link rel="prefetch" href="/assets/js/426.ac771d38.js"><link rel="prefetch" href="/assets/js/427.f658f203.js"><link rel="prefetch" href="/assets/js/428.a0528ae1.js"><link rel="prefetch" href="/assets/js/429.903b7f9b.js"><link rel="prefetch" href="/assets/js/43.70bcf4d5.js"><link rel="prefetch" href="/assets/js/430.353d7f7d.js"><link rel="prefetch" href="/assets/js/431.1e11cb70.js"><link rel="prefetch" href="/assets/js/432.d25a91f9.js"><link rel="prefetch" href="/assets/js/433.0d3614c6.js"><link rel="prefetch" href="/assets/js/434.275e233d.js"><link rel="prefetch" href="/assets/js/435.12b539e9.js"><link rel="prefetch" href="/assets/js/44.f84e7c7e.js"><link rel="prefetch" href="/assets/js/45.9aa302fb.js"><link rel="prefetch" href="/assets/js/46.bdf70056.js"><link rel="prefetch" href="/assets/js/47.efd42468.js"><link rel="prefetch" href="/assets/js/48.71b69724.js"><link rel="prefetch" href="/assets/js/49.a6ddec1e.js"><link rel="prefetch" href="/assets/js/5.ef856a2f.js"><link rel="prefetch" href="/assets/js/50.eda2f8a1.js"><link rel="prefetch" href="/assets/js/51.6be8a1ef.js"><link rel="prefetch" href="/assets/js/52.a02f5f13.js"><link rel="prefetch" href="/assets/js/53.ac74be9f.js"><link rel="prefetch" href="/assets/js/54.3cbba686.js"><link rel="prefetch" href="/assets/js/55.32ea3aa0.js"><link rel="prefetch" href="/assets/js/56.c1ce7372.js"><link rel="prefetch" href="/assets/js/57.396bba9a.js"><link rel="prefetch" href="/assets/js/58.dd39a083.js"><link rel="prefetch" href="/assets/js/59.e5b67c0c.js"><link rel="prefetch" href="/assets/js/6.3b7df6ac.js"><link rel="prefetch" href="/assets/js/60.195788e8.js"><link rel="prefetch" href="/assets/js/61.b4b79ed3.js"><link rel="prefetch" href="/assets/js/62.d6f23be5.js"><link rel="prefetch" href="/assets/js/63.1c3ba9df.js"><link rel="prefetch" href="/assets/js/64.291ede3c.js"><link rel="prefetch" href="/assets/js/65.1e0399db.js"><link rel="prefetch" href="/assets/js/66.bdf8b76f.js"><link rel="prefetch" href="/assets/js/67.a9dca10f.js"><link rel="prefetch" href="/assets/js/68.aeee4f95.js"><link rel="prefetch" href="/assets/js/69.0916bb5c.js"><link rel="prefetch" href="/assets/js/70.f882dcfc.js"><link rel="prefetch" href="/assets/js/71.20864521.js"><link rel="prefetch" href="/assets/js/72.0108915a.js"><link rel="prefetch" href="/assets/js/73.93f956c0.js"><link rel="prefetch" href="/assets/js/74.376a7e60.js"><link rel="prefetch" href="/assets/js/75.a744289f.js"><link rel="prefetch" href="/assets/js/76.875903cd.js"><link rel="prefetch" href="/assets/js/77.f6d9b608.js"><link rel="prefetch" href="/assets/js/78.01791787.js"><link rel="prefetch" href="/assets/js/79.b999e0eb.js"><link rel="prefetch" href="/assets/js/8.2358259e.js"><link rel="prefetch" href="/assets/js/80.62aa0801.js"><link rel="prefetch" href="/assets/js/81.91d52a61.js"><link rel="prefetch" href="/assets/js/82.05510306.js"><link rel="prefetch" href="/assets/js/83.d491dbb4.js"><link rel="prefetch" href="/assets/js/84.f8fc412c.js"><link rel="prefetch" href="/assets/js/85.1065a2ce.js"><link rel="prefetch" href="/assets/js/86.75d5ad70.js"><link rel="prefetch" href="/assets/js/87.d2c271d8.js"><link rel="prefetch" href="/assets/js/88.bfdb39f7.js"><link rel="prefetch" href="/assets/js/89.f4d5a2b7.js"><link rel="prefetch" href="/assets/js/9.3d18a4d8.js"><link rel="prefetch" href="/assets/js/90.1c75034c.js"><link rel="prefetch" href="/assets/js/91.9a6d03a1.js"><link rel="prefetch" href="/assets/js/92.b72817c8.js"><link rel="prefetch" href="/assets/js/93.31a179e0.js"><link rel="prefetch" href="/assets/js/94.548c6cec.js"><link rel="prefetch" href="/assets/js/95.ce99b92f.js"><link rel="prefetch" href="/assets/js/96.ac235195.js"><link rel="prefetch" href="/assets/js/97.d3149d88.js"><link rel="prefetch" href="/assets/js/98.e2f3c21d.js"><link rel="prefetch" href="/assets/js/99.4b5d3cc8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2ef34e86.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">五年前端三年面试</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Introduction/" class="nav-link">
  导读
</a></div><div class="nav-item"><a href="/JavaScript/" class="nav-link router-link-active">
  前端基础
</a></div><div class="nav-item"><a href="/React/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/Node/" class="nav-link">
  后端
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTTP/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/DesignPattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/CSBasic/" class="nav-link">
  计算机基础
</a></li><li class="dropdown-item"><!----> <a href="/About/about.html" class="nav-link">
  关于
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/johanazhu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Introduction/" class="nav-link">
  导读
</a></div><div class="nav-item"><a href="/JavaScript/" class="nav-link router-link-active">
  前端基础
</a></div><div class="nav-item"><a href="/React/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/Node/" class="nav-link">
  后端
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTTP/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/DesignPattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/CSBasic/" class="nav-link">
  计算机基础
</a></li><li class="dropdown-item"><!----> <a href="/About/about.html" class="nav-link">
  关于
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/johanazhu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>常见面试题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/%E9%9D%A2%E8%AF%95%E9%A2%98/" class="sidebar-link">JavaScript相关面试题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/" aria-current="page" class="sidebar-link">前言</a></li><li><a href="/JavaScript/JavaScript是什么.html" class="sidebar-link">JavaScript是什么？</a></li><li><a href="/JavaScript/JavaScript由什么组成.html" class="sidebar-link">JavaScript由什么组成</a></li><li><a href="/JavaScript/一切皆对象.html" class="sidebar-link">一切皆对象</a></li><li><a href="/JavaScript/对象.html" class="sidebar-link">对象</a></li><li><a href="/JavaScript/函数.html" class="sidebar-link">函数</a></li><li><a href="/JavaScript/作用域.html" class="sidebar-link">作用域</a></li><li><a href="/JavaScript/this关键字.html" class="sidebar-link">this 关键字</a></li><li><a href="/JavaScript/词法环境.html" class="sidebar-link">词法环境（Lexical Environment）</a></li><li><a href="/JavaScript/作用域与执行上下文.html" class="sidebar-link">执行上下文与作用域</a></li><li><a href="/JavaScript/执行上下文与调用栈.html" class="active sidebar-link">执行上下文与调用栈</a></li><li><a href="/JavaScript/作用域链VS原型链.html" class="sidebar-link">作用域链VS原型链</a></li><li><a href="/JavaScript/闭包.html" class="sidebar-link">闭包</a></li><li><a href="/JavaScript/原型.html" class="sidebar-link">原型</a></li><li><a href="/JavaScript/原型与原型链.html" class="sidebar-link">原型与原型链</a></li><li><a href="/JavaScript/数组.html" class="sidebar-link">数组</a></li><li><a href="/JavaScript/字符串.html" class="sidebar-link">字符串</a></li><li><a href="/JavaScript/循环都来这儿.html" class="sidebar-link">各种循环都来这儿</a></li><li><a href="/JavaScript/Object.create(null).html" class="sidebar-link">Object.create(null)</a></li><li><a href="/JavaScript/面向对象编程.html" class="sidebar-link">面向对象编程</a></li><li><a href="/JavaScript/函数式编程.html" class="sidebar-link">函数式编程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript原理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/%E5%8E%9F%E7%90%86/" class="sidebar-link">手写汇总导航</a></li><li><a href="/JavaScript/原理/源码实现.html" class="sidebar-link">各种源码实现</a></li><li><a href="/JavaScript/原理/拷贝的秘密.html" class="sidebar-link">拷贝的秘密</a></li><li><a href="/JavaScript/原理/模拟call和apply的实现.html" class="sidebar-link">模拟call和apply的实现</a></li><li><a href="/JavaScript/原理/模拟bind的实现.html" class="sidebar-link">模拟bind的实现</a></li><li><a href="/JavaScript/原理/call、apply、bind的应用.html" class="sidebar-link">call、apply、bind的应用</a></li><li><a href="/JavaScript/原理/模拟new的实现.html" class="sidebar-link">模拟new的实现</a></li><li><a href="/JavaScript/原理/instanceof——找祖籍.html" class="sidebar-link">instanceof——找祖籍</a></li><li><a href="/JavaScript/原理/防抖.html" class="sidebar-link">防抖（debounce）</a></li><li><a href="/JavaScript/原理/节流.html" class="sidebar-link">节流</a></li><li><a href="/JavaScript/原理/发布订阅.html" class="sidebar-link">发布订阅</a></li><li><a href="/JavaScript/原理/手写reduce.html" class="sidebar-link">手写reduce</a></li><li><a href="/JavaScript/原理/手写Object.assign.html" class="sidebar-link">手写Object.assign</a></li><li><a href="/JavaScript/原理/图片懒加载.html" class="sidebar-link">图片懒加载解决方案</a></li><li><a href="/JavaScript/原理/实现模板引擎.html" class="sidebar-link">实现模板引擎</a></li><li><a href="/JavaScript/原理/0.1+0.2为什么不等于0.3.html" class="sidebar-link">0.1+0.2为什么不等于0.3</a></li><li><a href="/JavaScript/原理/JSONP——从理论到实践.html" class="sidebar-link">JSONP——从理论到实践</a></li><li><a href="/JavaScript/原理/模拟MVVM的实现.html" class="sidebar-link">模拟MVVM的实现</a></li><li><a href="/JavaScript/原理/模拟数组方法.html" class="sidebar-link">模拟数组方法</a></li><li><a href="/JavaScript/原理/手写AJAX.html" class="sidebar-link">手写AJAX</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript高阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/%E9%AB%98%E9%98%B6/" class="sidebar-link">JavaScript高阶导航</a></li><li><a href="/JavaScript/高阶/JavaScript运行原理.html" class="sidebar-link">JavaScript 运行原理</a></li><li><a href="/JavaScript/高阶/JavaScript工作原理.html" class="sidebar-link">JavaScript工作原理</a></li><li><a href="/JavaScript/高阶/JavaScript引擎.html" class="sidebar-link">JavaScript引擎</a></li><li><a href="/JavaScript/高阶/JavaScript中的对象机制.html" class="sidebar-link">JavaScript 对象机制</a></li><li><a href="/JavaScript/高阶/JavaScript中的函数进阶指南.html" class="sidebar-link">JavaScript 函数进阶指南</a></li><li><a href="/JavaScript/高阶/深入理解JSCore.html" class="sidebar-link">深入理解 JSCore</a></li><li><a href="/JavaScript/高阶/JavaScript工作机制.html" class="sidebar-link">JavaScript工作机制</a></li><li><a href="/JavaScript/高阶/用js写js解析器.html" class="sidebar-link">用js写js解析器</a></li><li><a href="/JavaScript/高阶/JavaScript引擎V8执行流程概述.html" class="sidebar-link">JavaScript 引擎 V8 执行流程概述</a></li><li><a href="/JavaScript/高阶/TypeScript.html" class="sidebar-link">TypeScript学习笔记</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="执行上下文与调用栈"><a href="#执行上下文与调用栈" class="header-anchor">#</a> 执行上下文与调用栈</h1> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>在说一个概念前，我们需要确定它的前提，此文以ECMAScript5为基础撰写</p> <h2 id="一句话解释"><a href="#一句话解释" class="header-anchor">#</a> 一句话解释</h2> <p>执行上下文就是一段代码执行时所带的所有信息</p> <h2 id="执行上下文是什么"><a href="#执行上下文是什么" class="header-anchor">#</a> 执行上下文是什么</h2> <p>《重学前端》的作者winter 曾经对什么是执行上下文做过这样的解释：</p> <blockquote><p>JavaScript标准把一段代码（包括函数），执行所需的所有信息定义为：“执行上下文</p></blockquote> <p>并且他整理出在不同ECMAScript版本中执行上下文所代表的含义，</p> <blockquote><p><strong>执行上下文在ES3中</strong>，包含三个部分。</p> <ul><li>scope：作用域，也常常被叫做作用域链</li> <li>variable object：变量对象，用来存储变量的对象</li> <li>this value： this值</li></ul> <p><strong>在ES5中</strong>，我们改进了命名方式，把执行上下文最初的三个部分改成下面这个样子</p> <ul><li>lexical environment：词法环境，当获取变量时使用</li> <li>variable environment：变量环境，当声明变量时使用</li> <li>this value： this值</li></ul> <p><strong>在ES2018中</strong>，执行上下文又变成了这个样子，this值被归入 lexical environment，但是增加了不少内容</p> <ul><li>lexical environment：词法环境，当获取变量或者this值时使用</li> <li>variable environment：变量环境，当声明变量时使用</li> <li>code evaluation state: 用于恢复代码执行位置</li> <li>Function：执行的任务是函数时使用，表示正在被执行的函数</li> <li>ScriptOrModule：执行的任务是脚本或者模块时使用，表示正在被执行的代码</li> <li>Realm：使用的基础库和内置对象实力</li> <li>Generator：仅生成器上下文有这个属性，表示当前生成器</li></ul></blockquote> <p>总结的很完整，按照 <code>选新不选旧</code> 原则，本文应该以 ES2021为切入点展开，最次也要 ES2018，但主流的解释执行上下文都以 ES3 为例，权衡之后，笔者将以 ES5 为基础撰写执行上下文，并在后续补充说明 ES3 中的执行上下文</p> <h2 id="执行生命周期"><a href="#执行生命周期" class="header-anchor">#</a> 执行生命周期</h2> <p>我们在讲 <a href="/JavaScript/词法环境.html">词法环境</a> 时，曾经画过一张执行生命周期图，当时所讲的词法环境是在<strong>编译阶段</strong>产生，现在讲的执行上下文是在引擎<strong>执行阶段</strong>进行。</p> <p>一段代码如果要执行，首先会往调用栈（call stack）中压入全局执行上下文；再创建词法环境，此时变量该提升提升，函数该提升提升，并将这些变量登记到词法环境中（编译阶段）；接着进入执行阶段，执行可执行代码，该赋值赋值，遇到函数，就创建一个函数执行上下文，并往调用栈中压入该函数的执行上下文；而后创建该函数的词法环境，当该函数执行完后，从调用栈中弹出；反复循环，到最后调用栈中只剩一个全局执行上下文，除非你关闭浏览器，不然全局执行上下文不会弹出</p> <p>我们要往调用栈中压入执行上下文，调用栈的数据结构为 <code>栈</code> 。特点为先进后出。</p> <p>如果我们的代码是这样的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>那么执行过程应该是这样：</p> <p><img src="/assets/img/执行上下文周期.471e98cf.png" alt="执行上下文-example"></p> <p>图中的蓝色方块为 <code>执行上下文</code> ，外面黑框白底的区域就是模拟 <code>调用栈</code>。整个过程遵循先进后出的原则</p> <ul><li>在任何代码执行之前，先创建全局执行上下文，并往调用栈中压栈（编译阶段）</li> <li>创建词法环境，登记函数声明和变量声明（编译阶段）</li> <li>引擎执行到 <code>baz()</code> ，创建 <code>baz()</code> 的函数执行上下文，并往调用栈中压栈</li> <li>函数 <code>baz()</code> 调用 <code>foo()</code> ，创建 <code>foo()</code> 执行上下文，并将其压入调用栈中，</li> <li>函数 <code>foo()</code> 调用 <code>bar()</code> ，创建<code>bar()</code> 执行上下文，并将其压入调用栈，</li> <li>函数 <code>bar()</code> 执行<code>console.log()</code> ，同理将其压入调用栈，</li> <li>执行完<code>console.log()</code>后，被弹出</li> <li>函数 <code>bar()</code> 执行完毕，弹出调用栈</li> <li>函数 <code>foo()</code> 也执行完毕，弹出调用栈</li> <li>函数 <code>baz()</code> 同样执行完毕，弹出调用栈</li></ul> <p>只剩下全局执行上下文，留在栈底</p> <p>在这里，我们看到 <code>console.log()</code> 也被压入到执行栈中，不禁有个思考，哪些代码元素会被执行到调用栈中呢？</p> <h2 id="可执行代码"><a href="#可执行代码" class="header-anchor">#</a> 可执行代码</h2> <p>事实上，不仅仅是 function 可以作为执行上下文在执行栈中运行，在 JavaScript 里定义了四种可执行代码：</p> <ul><li>global code：整个 js 文件</li> <li>function code：函数代码</li> <li>module：模块代码</li> <li>eval code：放在 eval 的代码</li></ul> <p>所以才会看到 <code>console.log()</code> 被压入调用栈中，因为它属于 global code</p> <h2 id="执行步骤"><a href="#执行步骤" class="header-anchor">#</a> 执行步骤</h2> <p>JS 引擎室按照可执行代码来执行代码的，每次执行步骤如下：</p> <ol><li>创建一个新的执行上下文（Execution Context）</li> <li>创建一个新的词法环境（Lexical Environment）</li> <li>把 LexicalEnvironment 和 VariableEnvironment 指向新创建的词法环境</li> <li>把这个执行上下文压入执行栈并成为正在运行的执行上下文</li> <li>执行代码</li> <li>执行结束后，把这个执行上下文弹出执行栈</li></ol> <h2 id="如何创建执行上下文"><a href="#如何创建执行上下文" class="header-anchor">#</a> 如何创建执行上下文</h2> <p>到现在，我们已经知道 JavaScript 是如何管理执行上下文的，现在让我们了解一下 JavaScript 引擎是怎样创建执行上下文的</p> <p>创建执行上下文有两个阶段：<strong>1) 创建阶段</strong> 和 <strong>2) 执行阶段</strong></p> <h2 id="创建阶段"><a href="#创建阶段" class="header-anchor">#</a> 创建阶段</h2> <p>在 JavaScript 代码执行前，执行上下文将经历创建阶段。在创建阶段会发生以下三件事：</p> <ul><li><p><strong>this</strong> 值的确定，即我们所熟知的 <strong>this 绑定</strong>。</p></li> <li><p>创建<strong>词法环境组件（LexicalEnvironment component ）</strong></p></li> <li><p>创建<strong>变量环境组件（VariableEnvironment component ）</strong></p></li></ul> <p>所以执行上下文在概念上表示如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>ExecutionContext <span class="token operator">=</span> <span class="token punctuation">{</span>
    ThisBinding <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token keyword">this</span> value<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    LexicalEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    VariableEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里需要再多嘴一句：</p> <p>在很多文章中我们看到 执行上下文 只有 LexicalEnvironment 和 VariableEnvironment ，并没有this。那是因为在 ES2018 后，this 就归纳到 LexicalEnvironment （如上文winter所说），但本文是以 ES5 为基础撰写，故此版本的执行上下文中是有 this 的</p> <h3 id="this-绑定"><a href="#this-绑定" class="header-anchor">#</a> this 绑定</h3> <p>this的指向很简单，谁调用我，我只想谁</p> <p>在执行上下文中，this 就指向那个调用者</p> <h3 id="词法环境组件-和-变量环境组件"><a href="#词法环境组件-和-变量环境组件" class="header-anchor">#</a> 词法环境组件 和 变量环境组件</h3> <p>这两”姐妹“有点像，只是分工不同。</p> <p><strong>变量环境组件（VariableEnvironment component ）</strong> 用来登记 <code>var</code> 、<code>function</code> 等变量声明</p> <p><strong>词法环境组件（LexicalEnvironment component ）</strong> 用来登记 <code>let</code> 、<code>const</code>  、<code>class</code> 等变量声明</p> <p>按上例可以这么画图：</p> <p><img src="/assets/img/执行上下文的构成.469872ac.png" alt="执行上下文-example"></p> <p><code>LexicalEnvironment</code> 和 <code>VariableEnvironment</code> 则都是词法环境（Lexical Environment）。很多文章中常把 <code>LexicalEnvironment</code>  理解成 <strong><a href="/JavaScript/词法环境.html">词法环境</a></strong>，这是不对的，<code>LexicalEnvironment</code> 是一个单词，表示执行上下文中的是标识 <code>let</code> 、<code>const</code>  、<code>class</code> 等变量声明，而 <code>VariableEnvironment</code> 则是标识 <code>var</code> 、<code>function</code>  等变量声明</p> <p>如果非要用中文来表示<code>LexicalEnvironment</code> 的话，我更愿意用 <strong>词法环境组件</strong> 来表示；同理，<code>VariableEnvironment</code> 则用 <strong>变量环境组件</strong> 来表示</p> <p>对我而言，变量环境组件和词法环境组件就好比”装黄豆瓶“和”装绿豆瓶“，一个负责装黄豆（var，function），一个负责装绿豆（let，const，class），它们指向词法环境，本质是从词法环境中拿数据。</p> <p>所以无论是词法环境组件还是变量环境组件，都有一个环境记录器和一个outer对象，其中环境记录器记录变量，outer指向父级作用域</p> <p>具体可以看 <a href="https://262.ecma-international.org/6.0/" target="_blank" rel="noopener noreferrer">ECMAScript 6 标准中的第八节<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 详细了解一下</p> <p>回头看上述例子：</p> <p><img src="/assets/img/执行上下文中的词法环境.3625fb10.png" alt="执行上下文-example"></p> <p><code>bar()</code> 函数中的 <code>console.log(a)</code> ，本环境记录器中找不到，就引着 <code>outer</code> 找，在 window 中找到变量 a ，赋值后，弹出，<code>foo()</code> 执行完后也弹出，<code>baz()</code> 执行完弹出，留下全局执行上下文在栈底</p> <p>之前在说 <a href="/JavaScript/词法环境.html">词法环境</a> 时，我们曾下过这样的定义：<strong>outer 就是指向词法环境的父级词法环境（作用域）</strong></p> <p>但是本人有一点不是很明白，outer 既然指词法环境的父级作用域，那 <code>作用域链</code> 从那里来？</p> <p>以上面的 demo 为例，bar 的执行上下文的伪代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>BarExecutionContext <span class="token operator">=</span> <span class="token punctuation">{</span>
    ThisBinding <span class="token operator">=</span> <span class="token operator">&lt;</span>Global Object<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    LexicalEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span> 
   		EnvironmentRecord<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        outer<span class="token operator">:</span> <span class="token operator">&lt;</span>FooLexicalEnvironment<span class="token operator">&gt;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    VariableEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span> 
        EnvironmentRecord<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        outer<span class="token operator">:</span> <span class="token operator">&lt;</span>FooLexicalEnvironment<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>bar 的 outer 指向 <code>foo</code> 执行上下文， <code>foo</code> 的 outer 指向 window，变量先从当前执行作用域查找变量，如果找不到，就引着 outer 继续查找。这一过程中，bar作用域—foo作用域—window作用域。</p> <p>当代码要访问一个变量时——首先会搜索当前词法环境，然后搜索外部环境，然后搜索更外部的环境，以此类推，直到全局词法环境。</p> <p>而我们潜意识中的”作用域链“是在ES3中的才有的，因为那个时候的执行上下文中有scope（作用域），当前作用域找不到变量，就往外层作用域中找，然后再到更外层的作用域找，知道全局作用域，作用域与作用域之间以<strong>链表</strong>的形式连接着，这就是作用域链。</p> <h2 id="执行上下文有几种"><a href="#执行上下文有几种" class="header-anchor">#</a> 执行上下文有几种？</h2> <p>分三种</p> <ul><li><p>全局执行上下文</p></li> <li><p>函数执行上下文</p></li> <li><p>eval执行上下文</p></li></ul> <h2 id="ecmascript3-中的执行上下文"><a href="#ecmascript3-中的执行上下文" class="header-anchor">#</a> ECMAScript3 中的执行上下文</h2> <p>如果你喜欢看有关执行上下文的文章，应该常看到这样的描述，执行上下文由变量对象（Variable object，VO）、作用域链（Scope chain） , this 构成。</p> <p>其实我们可以把 变量对象（VO） 看成是 ES5 中的 词法环境，scope 为 词法环境中的 outer</p> <h2 id="如何追踪执行上下文栈"><a href="#如何追踪执行上下文栈" class="header-anchor">#</a> 如何追踪执行上下文栈</h2> <p>例如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">lg</span><span class="token punctuation">(</span><span class="token string">'foo4'</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
<span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>得到错误提示如图：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjIAAABeCAYAAAA5Zf5RAAAgAElEQVR4nO2dC7BdVXnHl01HhAo3RImYkKJC0QEMpVJChjjia1QMoSAGHFoBM+ExlY6ggZmOAUnSDHJr4tDO8KqVQKIQLzI8fLRSrCM2baVNDIERJ7Vm8lB5p5Qgw6T2/PbKd8866+7neeSes8//N7Pn3HP2Y6219777+69vrf19r/nt88//1gkhhBBCDCC/M9kVEEIIIYRoFwkZIYQQQgwsEjJCCCGEGFgkZIQQQggxsJQTMi/9r3tu9fXulyef4J5705v856rrk9+FEEIIISaL1xS9tbTnOw+4PZ/5nHvjAdMnrHvmlafcQV/+a3fQR87oWQWFEEIIIbLI98jsecn95uqlqSIG+J31bs+eXtRtcLj6aue++tXJroXod7hPDj3ULz/8YXeO+fLLzn18YfO4P/1pd45rJHV+o3PPPtvd4w4a4bXj78nErjkLfwsx5OQKmRfvvNNNcwf7L/90r3MXnuv/5vOhbyZ/sv7FO+8oXeDfNgz+r3796+wN7J80fNDzcH7PaYP7MKUtVR86CCN7cIZLrwVT+MBOFhmxrvHFLzq3a5dzH/hg94554IHOfWO9c1u3Ojf7hO4dtx/hPuQ50G2xVgT/vz//b3/tnn/eX8dekvYMFLXjsSeecFcsXepe+p8Xx3/b+8or7vobb3TfffjhZAnXs/3HFy9OPsNt+Y1t09i+Y4f71BVXuK+sWzehDPZjYT3blaGoTH5jHduw7f4iV8i8et+3ml/uvMu5ZZ9vKJHr/efau9O3K8ENt9zi/uXHP65W02Hjoov8Q9MM1IYN/ju/95pVq3xZyfKMc294Q+/LFP0JRnvY7wH+B9/2Vi8a+wETryz9UidRmbcdMSv5/PmO7eO/7Xr6affSnj3u3Sf9cfL9+He8Y3z9f/3iF+5d73xn8jfi5nMrVrj3z5s3/lsM29y6dq078dhjW37/3o9+5P7w+OPdN267LVmuaAiPf/zBDwrrW1QmYmnnL3/pFn3iEyVa311yhcxrnw0m897eEC4PfNu5BR/1n7ffnb5dCfbu3evufvBBd+c991SrLdAbu+RSv2S56Vu8CoFHgX1Db0PoJcHTEbqM4+/xvrGLuXEBk7LC41Iuvy1Y4NxD33NuxozuuKatLmHPlPpaufzdUMSZQw5xW8r2/NiOuqcNkdh1odw07xHbZZXJ8cbGmucv9gLZeax63uJhl/B6x+cgrCvlhO2IvWmx1yo8t3ntLCI8breGDYru2zL7pdUlbmdZT2GlcxvcB/x+9NHObf6Jc3PnVvMW2v1T1ctoXtErr3Tu1lsnXu94SDn8zufKldn3dNa9yX48J3he8NyIywzPe9p1zHv2FT03xX7l9w45OBEq/75x4/hvj//sZ+4ts2Yl6xAFx7z1rYmAMa/MYfs6FKxfvXy5+6Pjjss8/l0P3O9OPflk9wdHHdXy+8zDD3frH3gg8cLgNfnWQw+5mW9+c8s2eFZiT01RmYvOPz9ZJoNcIbN31ozmF4aTzjjdixg+bZipwf+F21Xg0c2b3XWN3v+OnTur7bi+IaKmjniPwf33Nx6Mf9N8GPKPHLqBw95k46Zpehqe972sRx8tLo+Hwdx5viwrk+GBL3yhuc3oqHMbHvHlJo171JdL+bZ9t1zTtOPii72XBmj7t7/j3F9c3uyhXXut/055eFjsAUtbll7je5nm8eH8hQ9ZHtxZD30e6PPnp597rsvBB/t11O32NX5fHpgLzmqWyToe0qEAWNx4wG590q+/eJE/didQp09e4K+xXW/rwVIuxtC8XNTryiWtD3bOH+vD6wns+8Lu4P563l8PKNPOLLg+4f15+kcaT6K7OjsHZe7bLKwuadeBc7t2XfP8VfUUZp1bM8x2zFWN/6lLL/Pl8T8TeyfLeors/zA8bpn7y7yi/P/w/xZf7yJ4Jtx/78R7Ou/epEwbfrTrFpb57nc36xSTd/4g77kpJoWTTzzRbWk8HxAqiIpNW7YkvxlTp05NPv9zy2PuqLe8JREcO3/1q8LjMvz0dOP//4Onnjph3TuPPdZd99nPumu/9CV33qc/7T76gQ+4D7/vfd1r1CSQ75E5+0+aX/7sPOeuWeHcn1/tP/metl1FpkyZkiyV4GF21VX+78MOc+6pp/yEYx7c//pvzi1flu5yjXtmGGUeju3w0MOtk5x5sPCwoVweUO0etyw88GgrD6Jt25ybNs25k05qrufBy0MPMNoYX7ZlfJXeHr1bzgGffH/66da2ZA0t8YC1cjh+6N7mumC4gXPxg3/2+3IueKjacY480h+npcxgPUYrNIxmiKoIQM4J94XdJyGUy/kx48DxMTThNcu6ntxv68d8rzkWKGXamYYJ0VBA8ncv5oLE9207cE4wiNxX7czZSju3nAPu0fC6c3z73+6E2PvRq3MbE/4P0l4rM+/ebJcy5y/ruSkmjXB4yYaV7DfjXbNnu02PP+6OjTwrWSCK8LJcfuFFbsoBB0xYj8hBxCBmVjU6Fatvu23CfBeEzd+vXu1mHXFEmy3bv/xu3soDz17gXl53jztw+07n3n9WcwXDSvuGll6eNTPZrh3eM2eOO/v008ttzIPgoIPaKmecG27wBssMYtmhCjN0C4J20iuczHkDGMnnnvO9WQzBKXPKj5fzgO31hMW6YqLKetWIQHq3ZrDaBSHKPVW2t1+GXt633D8sNvzSz/eUebbwdPA/Qp3394RhIVJguOZD731vMryEt8WGlfDO7GmImqmHHJKIicsXLy59zB8++mP3H4895i787JUtv/+oYSsQL5S18IwzxkUKc2QQPnhv0oTPIJD/+vXrDnCvve4v3W/oNaXA76xnuyrMmD7dXXb++ekixnppDz7Y/I0HDz3AIkPNAxqDntZLxPAw5GSGggcZHpkQ1rMd664MboK84YQy9KL3w7lg6Aj3ML35BTlikvNhQoe60O79OT6O14ehGxuiQnzhGYgmoWXSzhwZhF7jPksdQrBzYMbM7gV6sGWxCZd4F8xb0247zcPBkF+Wq3/cq1DhLbJO79sy4AFAHJnHr13sHIT/u3bfmvCiI8M1LfJwxXAebLIu545r1C3CuSvx8ySLvHsT2vHqljl/oi857phj3GON++i73/9+y7BSu+BNsYm8LEy+/fBpp7V4WJh/Y6QNVaXNkelnCiP7Tjlptnvd3X/nXl2x1P1mzhz36u8f6T+XL01+Z30Vjjj8cHf1ZZe5dzQuXiaM4SMqzBXM32XG9dP2tQe/GX5z3zN3YEnwQEsm5D7shwxY17gBxuHhz0PCJutWjdnB/jxQbDinW3EoMJDUmYde/LAKJyeCuZypCw/QcCJhPOEyb45MO+CtYMjF2k/ZzCfq5QOW633zTd5oxe20c2CTRvnkexkjH09yRUSed15xO02IxBM5TVDa/R3eY2XEpom8eCIs92Yn9621M5yoHk9it+NR5hWf6fwNmqL/e/sfHr93S96b3Pv2/8B5uu6azuqZdlw6FNddV26/vHszPHb4f2jXLG0Csj1POnluikljRqNjdXhjeY1zE4aV0kCE2GvQzHHB+/KVr3+95dXsPC4855xk/oy9fv0PDQGVNQwVUlSmvXrN76xnu/C1715SGNlXuOaM/2/e0zS+9vCYTHc6D/Gj3+4nFIZDG+Y671dXv9g/9Ot9K4QQXSR3jozYB67szVua322YijdLJpPkLZT3tU7yFcLo1/tWCOHW33ef+0Y4haKmnPmhD7k/PeecnpYhIVMGvB1MmsQtbTC5cX8Ep0sjec2XOTFT/CvLCool0ui3+1YIMc7CM89MFtE5GloSQgghxMBSONlXCCGEEKJfkZARQgghxMAiIdMJcR6bfgiypcy5ww3XnzeV+uFeFEKI/cBwC5lOjD77EsAsLR9Kp5hAaifeDHEjiCvTaaRZUY4w/H1aIEaL+1E1CWQYqyU3KWq0nonfxHRBzHQa/0cIIQaA4RYynUCUXqL1EiW2m2B8MEILzy3eNgaDVhQEK87qLfw5f89p1b0Y7DdjlnOfusjnVIrhPHPMtAR/ebAPbxoRH8il5CEjBoyJ57TkfwjqCy/wKTmEEKLm1F/IZPVeMehxlNUyw0NZkVRDcRBHfw17zPFwVNyLx/hghIgEXAUMGQYtzICddi6IRBsKnbg+oeeAuq1cGURxjSKpZrWTbThOsm/UTisvPM+sY3vCYYf7jY3tKzsoN6/MUIzE3+PEgeExCRZ3y83+WmZ558yzEtbb8i6ddlr6PpaPKAurU+ytsczTZVI4EMbewu+HcE+TVFRDTEKImlN/IRP2XskJs3adNxrE0iAHDT3pKsNDZrwwIGST5ZjsZwYrifFyll9vZWJUMCgsGEvbh20IU27G0zwqFvK+CpbHKc34mcGEMFs1mNG0BaNIjiBjdNR7BlhHTBLLD5PXTiB1wsZN/hyz7vY1XjhQHrFM+M3qhrgyAcZ+u3d7LwaJ0ih79vE+uFtRmXnQJtqWldWbenFcjt9ORuf9STjsxP2TlkXZ8o7ZeRZCiJpSfyFjPWnLCbN+rLep6zGG5NsxI0mCOMQShpgFI25iybITsw/GCY8KOVjaCXDHscmgHGcIx8jjeSKaa5p3IM6bQ/6WMFkd9bX5NtTbRENeOwHxsXxZM1Gl1REQkXgLEDHbtvl6W3Ri9rOAbZQdCrOiMvOwRJF5+Xk47q7tXlil5b7pdtJFSzwZi8siTEwnQ0v3+jQVaW3qdoJIIYToQ+otZCyLtXlA+MRQ9iN4OhjmsoSDYVK4ToYHMGZ4RTDOaXNjGMpCTJmnAvHQaxAgzz3nvSRcE8vM3UvM80QkZAx/2nm1OS+IvqriYrJAAC48p3pGaCGEqAn1FjLJw31K0yOAdybMPYOhYrgh9EB0CkIEd7/1kDHWDJfgWTCvgBlQPvmOp8h6/LYwtIKoKOsF4NiIgzRvk/X8IfQ0WO4dO77Vp9N2FmFZjPFAIbCSdAtdKJNrawYdgcYcphjzZnBuQ+MfTrBNC+GfNkemU7LmyFSBc4CXMW3SubVJCCFqTL2FDL1Vkiqal2NkxH8PwWjh/ehWLBiGYRj+sDIx0hse8QYUwYDnxSYI88n3bgwB2JBSXhp3hpbwNthkXxMU1v6585xbsqRceXntLAPiAxGCkCy7T16ZLKyzidszZ7a++RUOMbLY8cDeFMM7VOW1dRMiNmnczmM4ody8a6xnuzJvjIUTyt3eZpu4N+OhQMQgw2HxOWQ7hu+6/VadEEL0Gcq1VCcwoBi2O9b0/7AIhpYhHjwginnTfRBRCJ+8t6aEEKIG1NsjM2wgCPBw5MWR6RfwROEds0m+onsgYHhLLO1tJiGEqBkSMnUDEfPC7v6NH2JxYJjr0u4bWiIbhrtWf9nHxSk7ZCeEEAOMhpaEEEIIMbDIIyOEEEKIgUVCRgghhBADi4RMJ8R5ivphXkonGb1F/8D1U3JPIYQoZLiFTCdGn32XXlMtT1MRcULEdgwZk315c0mvNO8f2r1m8X5xclG7fv2e90kIISaZ4RYynUAE3aee6m7AMYyXiSKiDVfNXmxJJ/Nev8YwqqffSpwpu8p+xO2xJJakgqjyxhh5otjHrnksPnl9mteo+8HTJ4QQfUr9hQxGO63Xi0G3iKwWObXM8FAYdZUQ+BalNxQHcW877GnHw1FZPW4Ln19WKOEhwqhaFumsc0FKgFDoxPUJw+VTt5Urg0iyUcLFrHayDcdJ9o3aaeWF55l1bL9jR+t+Y2P7yg7KzSszFCPxd/O+je8bHJPXlHldmWuZ5Z1LS1Fg0ZRJhwBp6QLsfmlHPFKvCy+QV0YIIXKov5Ahsqn1eAlBv3adN2qkJqA3TK+4yvCQ5eqhFz77hGZCSougiiFccFazl856hBIGkAVjafuwDfFUQuNpwovtViwvHwvEciyl5ToyIw5xMkRLpmgLw1IYZGN01EffTRJKLvLnqqidQPqBjZv8OWYdngWMOuWR54jfrG6IKxNg7Ld7t881tXixL5tEnwi7ojLzoE20bbytz7SeW+rFcTl+WeEQ5rDKSxeQhaUtiAVkCPcBnrmsjN1CCDHk1F/IhDl2MAr0mNMSK3YLjCE5f8yYkekZsYQhZsGIm1hiG8RBmLTShJcZ1bLzdzj2tGlNL4GBkcdYkmMpLVx9nLuHpJFhfaivDXlQbxMNee0ExMfyZd7Ym4fC1iEiMc4Y7m3bfL0twi/7WdJGyg6FWVGZeVjCztirFMJxESIIq1hYWFLPUOiGAtFEINmzw+Ob8I3PfTiMiNiDtCFB6j19enH7hBBiSKm3kMHokrDPPCB8YigHAUuC2GlmbgwvhhLjnDa8wbAIYsqMKuKh1yBAyNSNl4Rrcsqc3kf4Nc/T1id9jqe0YUQECEIE0Rd7rtJAhDFPylIBIERIu5CXuDMNyqFMIYQQlam3kEl66lOaHgG8M5u3NNdjQOhFdyoWQpg7w3CR9cox1gyX4Fkwr4AZUD75jqcohv05TpIBuQQcG3GQ5m0Kh0BCTwOfTA42L4PVp9N2FmFZtxmKQWAxPNSNMrm25p1BoDGHKcY8JAi20JND2zk+Q1nmEQpJmyOTlPmT5nE499QnpMwcGbvW8+dPXJflaRNCCJFQbyHDcAU9ZAwURmhkxH8PwWjhtelWLBiGDPCkWJkY6Q2PeAOKYGCOiU0Q5pPvJiTCicnsz35lX6M2Q5fnDWB4g56/DWGYoLD2z53n3JIlnbezDIgPjD5Csuw+eWWaB8smbs+c6dzCc5v7hkOMLHY8QEhccqn3DlV5bT2+ntSLOpQ5Rjhp2QRU2n7UaeqIclIJIUQGyrVUJzCOeDnuWNP/hg/xwBBPlgEX/hyd/TH/RlWnMYqEEKKm1NsjM2wgCPBw5MWR6RfwZOAds0m+YiIMj/H6tUSMEEJkIiFTNxAxVYKy7W9sSIU5ITff1P+eo8nC3lZLm68jhBBiHA0tCSGEEGJgkUdGCCGEEAOLhIwQQgghBhYJmU6I8xT1w7yUTjJ6i/6B66fknkIIUchwC5lOjD77Lr2mWp6msvUpSiiZB5N9eXNJrzT3ngmJKHNyJsXEyS/j5KJ2/ZQwUgghchluIdMJRHElPH3Z7NRluOsuH7DO0ikQqK6KlwdDSKTevNevMYzq6bcSZ8quSihmy6Q2MMgTRfoI2zcWn6Q+INlmP3j6hBCiT6m/kAmj5Ya9Xgw6yRTJQGzRYMsMD1nIeaKxEp7eorqG4iDubYc97Xg4Kuxx86qtvW5bJSEi4AUgGJ5lkc46F6QECIVOXJ/Qo0DdVq4MkkpGCRez2sk2HCfZN2qnlReeZ9ax/Y4drfuNje0rOyg3r8xQjMTfJ3hPgmMSFZigc1zLLO9cVoqCIsqkKMiCehFHRl4ZIYTIpP5CxrJJm5dj7Tpv1BAM9IYRC1WGhyxXD/mZZp/QTEhp2Y0xhGStZr2ViVDCALJgLG0ftiGeSprxtISEZXIXgeVYSts+zNIcewwsmaItDEuRw8gYHfXRd5OEkov8uSpqJ5B+YOMmf45Zh2cBo0555DniN6sb4soEGPvt3u3cqlXOLV7syybRJ4KuqMw8aBNtG2/rM62pEaiXZRyvKhxCIVxlmBIRjZjOG5LifiFTeFbGbiGEGHLqL2TCHDsYhfVj6YkVuwXGkHw7ZiRDzwoLRtzEEtsgDuKklRgt8h6tWF4+D1FWckGMPMaSISsTW3FZ4x6XQ33SyLA+1NeGPKi3iYa8dgLiY/kyL05s+M3WISIxzhhuBBv1tgi/7GdeKcoOhVlRmXlYws7YqxTCcXdt98IqFhbUKRa6lozTxBEiLxZWJnzjc885tf0Qe5A2JEi9p08vbp8QQgwp9RYyGBTmmZgHhE8MZT/T7RxEGF4MJcY5bXiDMPiIKTOqiIdegwAhUzdeEq7JKXN6H+HXPE9bn/TnN22YiHM/Y5YXfVXmuhiILrx0VaEcyhRCCFGZeguZpKc+pekRwDuzeUtzPQaE4YbYI9IJzJ1huMh6/RhrhkswcuYVMAPKJ9/xFNn3vEzIeXBsxEGat8k8BxB6GvhkcrB5Gaw+nbazCMu6zZweBBZejG6UybU17wwCjTlMMeYhQbCFnpzw3KelBSgzRwaPDN4ThJpRZo4M29Cu+fMnrsvytAkhhEiot5BhuILEhBgojNDIiP8egtHCa9OtWDAIEIY/rEyM9IZHvAFFMGDsbIIwn3w3IWFzM8I5F2Vf5zVD98QT2dswvEHP34YwTFBY+xnOWrKk83aWAfGBCEFIlt0nr0wW1tm5mznTuYXnNvcNhxhZ7HiAkLjkUu8dqiIg4wnEiLKymcfDSct54pU6TR1RTiohhMhAuZbqBMYRL0dZYzqZdHsIrY5wjs7+mH+jShmwhRAilXp7ZIYNBAEejrw4Mv0Cnii8YzbJV0yE4TFev5aIEUKITCRk6gYi5oXd/RtEzYZUmBNy80397zmaLOw17rT5OkIIIcbR0JIQQgghBhZ5ZIQQQggxsEjICCGEEGJgkZDphDhPUT/MS+kko7foH7h+Su4phBCFDLeQ6cTos+/Sa6rlaSqDxTspGz8mhsm+vLmkV5r3D+2K2Tj5ZZynya6fEkYKIUQuwy1kOoEIuiR1tKjB3YAeOIaQhIntgCEkUm/e69cYRvX0W4kzZZcFobn6y80UGFw3xG1ZAUqeKNJHmBCOxedVV/lkm/3g6RNCiD6l/kIGo53W68Wgk0yRDMRhJN0io2Eh54nGSgh8i9IbioO4tx32tOMefNjjJvJuWmLHMmA8CYZnWaSzzgXRZ0OhE9cn9ARRt5Urg6SSUcLFrHayDcdJ9o3aaeWF55l1bL9jR+t+Y2P7yg7KzSszFCPx9zgKb3hMogITdI5rmeWdS0tRwHkOg9WxP+I2TBNRJkVBFtSLODLyygghRCb1FzIIA+vx0nNeu84bNeJz0BumV1xleMhy9ZCfiQSB1hs3AYIhXHCWX29lWkZkFoyd7cM2xFPpxnwWM55puY7MiEOcDNGSKdrCsBQ5jIzRUR99N0koucifq6J2AukHNm7y55h1eBYw6pRHniN+s7ohrkyAsd/u3d67sXixL5tEn+QcKiozD9pE28bb+kxragTqxXE5frvCwRJglk25gIhGTOcNJXK/kCk8K2O3EEIMOfUXMmGOHYzC+rH0xIrdAmNIzh8zZiQQRCxhiFkw4iaW2AZx0I2klVnJBTHyGEtyLKV5e8xjYOeIpJFhfaivDXlQbxMNee0ExMfyZV6c2PCbrUNEYpwx3Nu2+XpbhF/2syBwlB0Ks6Iy87CEnbFXKYTj7truhVUsLKhTntBFZCFKGQ6Kj4lois8959REFWIP0oYEqTeJKIUQQqRSbyGD0SUhonlA+MRQDhMYXgwlxjlteIMw+IgpM6qIh16DACFTN14S82L0OsKveZ62PulzPKUNIyJwZszyoi/2XOUx7il6srw3JoRyKFMIIURl6i1kkp76lKZHAO/M5i3N9RgQhhu64RExmDtDz9x6/RhrhkvwLJhXwAwon3zHU9QpHBtxkOZtop0YZgg9DXwyOdi8DFafMuS1swjLus2cHgQWw0PdKJNra94ZBBpzmGLMQ4JgCz05tN2yUKelBUibI2O/54mYMnNk2IZ2zZ8/cV2Wp00IIURCvYUMwxUkJsRAYYRGRvz3EIwWXptuxYJhyIDhDysTI73hEW/kEAzMMbEJwnzy3YSEGUvqY/Mnyk4SNUP3xBPZ2zC8Qc/fhjBMUFj7585zbsmSzttZBsQHIgQhWXafvDJZWGcTt2fOdG7huc19wyFGFjseICQuudR7h6q8tm4CxO1t1imewJ1FOGnZBFRa2dRp6ohyUgkhRAbKtVQnMI54Oe5Y0/+GDxHAEE+WARf+HJ39sdY3o4QQQrRQb4/MsIEgwMORF0emX8AThXfMJvmKiTA8xuvXEjFCCJGJhEzdQMS8sLt/g6jZkApDMjff1P+eo8nCXslPm68jhBBiHA0tCSGEEGJgkUdGCCGEEAOLhIwQQgghBhYJGSGEEEIMLMMtZCwHUTdyHYnuMR5jJUonMCHxY8W4PxZLJiuvkRBCiIFjuIVMN4izLAsPoqGdjM/sRyycr31t4jqLUGzpFEgsWTbBI3XhGrGPEEKI2lB/IYMBC3vw5n3BABI5lwi6Fg22ag/fwtqvWN4a6yOrTEQP3oCVK9OjwMYeh9BzwHbJfm+c6K2gvFA0WFh8yg3343g33thablGZ4XHj72F02rgt9tpwlvcjK3Q/+yFWXv/6/HMPnP84xorVKfayEdU4LWmmEEKIgab+QgbjZT14wr2vXecNKwaTZIpkTyY4m21TNvgYhpIUA2lh7bPKBMLyb9zky2bd7Wu8UWf9Jy/wKQRs3zi43eioj4SbJHdc5OsNlk3ahA1pCsJgc7YfZe/c6b0SiIAyZWbBvrTLEnKyxDFPLCUCiRizMk5XhXqbcCJP1Hnndee4QgghBpL6C5kwxw7CY/1YemLFKuBFSBIFbk0XPnllkn17+TI/TGLJLEkMaOvDBIokEcRYmwgi0aGJJso17xF/k0Ha8iw9+KDPoWTB5tiP3EaUHYqNMmVmwbHJAUT78oZ3KA8Rhecq9JJY8saqXhLLYs2CSEKIhXXl/LBOaQ+EEGIoqLeQwdCTENG8BnxizDsF42vGOR6K6lWZRSBAmFuyfbsXImWyUHeKeZ4A0ZY2J2Y8O/TW7osLE2CdClMhhBADS72FDJ4ON6Xp+cCobt7SXI9XgaEUjGxVMMqIFDwSoaehqMwsLHu1DRfhZUCY4HUoE8afYaRp05xb8Vd+nzIZpcuUad4ZE2hp4HXhXJAaIfSOIGy+/R3ndm2fWJ+sOTJVsHpbOyBrjowQQohaUm8hg3FnrgieE4zbyIj/HoIRxkC3M9mXYQ5E0OeXNvcrU2YaCAdyD5GDiP2YiIzIKptrh/0ZXlp/txdXZffJKxOPB/Nq+H3uPOduu625rwmRcAjtis80BZANNzFxt0o+JRMiibdlryxd3ksAAABaSURBVD+PNmE4nB9j16rs8W24j2vNBG/a1ImIEkII0Rco11KdwFjjAbljjZIxCiGEGAokZOoCHpKj3+7n7miiqxBCiCGh3kNLw4DFgWEIZtWoRIwQQoih4v8Bkfj8jpbuTIQAAAAASUVORK5CYII=" alt="执行上下文-example"></p> <p>或者在 Chrome 中执行代码，打断点得到：</p> <p><img src="/assets/img/在chrome中查看执行上下文栈.2cc61bab.png" alt="执行上下文-example"></p> <h2 id="关于变量与活动对象"><a href="#关于变量与活动对象" class="header-anchor">#</a> 关于变量与活动对象</h2> <p>笔者最开始了解执行上下文、执行上下文栈以及闭包时，大家是用变量对象和互动对象来解释的，即</p> <p>XXX</p> <p>在开头的时候笔者已经强调过，以ES5为标准展开。</p> <p>简单来说，变量对象是与执行上下文相关的数据作用域，存储了在上下文中定义的变量和函数声明。而在函数上下文中，我们用活动对象（activation object，AO）来表示变量对象</p> <p>作用域在预编译阶段确定，但是作用域链是在执行上下文的创建阶段完成生产的。因为函数在调用时，才会开始创建对应的执行上下文。执行上下文包括了：变量对象、作用域链以及 <code>this</code> 的指向</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>执行上下文可以理解为函数的执行环境，当函数执行时，都会创建一个执行环境</p> <p>每次只能有一个执行上下文处于运行状态，因为 JavaScript 是单线程语言，它由执行栈或（叫）调用栈来管理</p> <p>创建一个函数，就生成了一个作用域（对吗）</p> <p>执行上下文创建阶段分为绑定this，创建词法环境，变量环境三步</p> <p>调用函数时，创建一个新的词法环境</p> <p>词法环境这个说法，是ES5规范中的内容，可以理解为 ES3中的变量对象，scope 为 词法环境中的 outer</p> <p>在ES5中，<strong>词法环境</strong> 和 <strong>变量环境</strong> 的一个不同就是前者被用来存储函数声明和变量（<code>let</code> 和 <code>const</code>）绑定，而后者只用来存储 <code>var</code> 变量绑定</p> <h2 id="q-a"><a href="#q-a" class="header-anchor">#</a> Q&amp;A</h2> <p>Q：是不是说在定义时确认了作用域，在调用时确认了作用域链？</p> <p>A： yes，这里需要注意的是每一个执行上下文都会进行提升操作</p> <p>Q： ES5 中的执行上下文的词法环境和编译阶段的词法环境有什么不同？</p> <p>A：一段 JavaScript 代码在执行之前需要被 JavaScript 引擎编译，编译完成之后，才会进行执行阶段，大致流程如下：
<img src="https://i.loli.net/2021/05/08/tyq8YZBsQSPWkf4.png" alt="JavaScript 的执行流程图"></p> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ul><li><p><a href="https://github.com/xitu/gold-miner/blob/master/TODO1/understanding-execution-context-and-execution-stack-in-javascript.md" target="_blank" rel="noopener noreferrer">理解 JavaScript 中的执行上下文和执行栈<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://blog.bitsrc.io/understanding-execution-context-and-execution-stack-in-javascript-1c9ea8642dd0" target="_blank" rel="noopener noreferrer">Understanding Execution Context and Execution Stack in JavaScript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://262.ecma-international.org/6.0/" target="_blank" rel="noopener noreferrer">官方ES<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://mp.weixin.qq.com/s/Ad7L8j9ezj_g1xTa0wAMHQ" target="_blank" rel="noopener noreferrer">JavaScript 执行上下文 · 变量对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://gitbook.cn/gitchat/column/5c91c813968b1d64b1e08fde/topic/5c99a9a3ccb24267c1d01960" target="_blank" rel="noopener noreferrer">老司机也会在闭包相关知识点翻车（上）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://www.cnblogs.com/echolun/p/11438363.html" target="_blank" rel="noopener noreferrer">一篇文章看懂JS执行上下文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">8/25/2021, 6:14:47 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JavaScript/作用域与执行上下文.html" class="prev">
        执行上下文与作用域
      </a></span> <span class="next"><a href="/JavaScript/作用域链VS原型链.html">
        作用域链VS原型链
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.ef9d35bd.js" defer></script><script src="/assets/js/2.e1bdf339.js" defer></script><script src="/assets/js/7.0023e9f0.js" defer></script>
  </body>
</html>
