(window.webpackJsonp=window.webpackJsonp||[]).push([[285],{743:function(t,e,r){"use strict";r.r(e);var v=r(25),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"diff-算法"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#diff-算法"}},[t._v("#")]),t._v(" Diff 算法")]),t._v(" "),r("p",[t._v("对比 Diff 的话，最有的算法时间复杂度为 O(n3)")]),t._v(" "),r("p",[t._v("React 在以下两个假设的基础上提出了一套 O(n) 的启发式算法")]),t._v(" "),r("ol",[r("li",[t._v("两个不同类型的元素会产生不同的树")]),t._v(" "),r("li",[t._v("开发者可以通过设置 key 属性，来告知渲染哪些子元素在不同的渲染树下可以保持不变")])]),t._v(" "),r("p",[t._v("完全对比O(n3)无法接受，故降级为同层对比的 O(n)方案")]),t._v(" "),r("p",[t._v("为什么降级可行？因为跨层级很少法神可以忽略")]),t._v(" "),r("p",[t._v("diff算法")]),t._v(" "),r("p",[t._v("什么是diff算法")]),t._v(" "),r("p",[t._v("​\t对比 git diff")]),t._v(" "),r("p",[t._v("vdom为什么用diff算法")]),t._v(" "),r("p",[t._v("diff算法的实现流程")]),t._v(" "),r("p",[t._v("​\tDOM操作时昂贵的，因因此尽量减少DOM操作")]),t._v(" "),r("p",[t._v("​\t找出本次DOM必须更新的节点来更新，其他不更新")]),t._v(" "),r("p",[t._v("​\t这个“找出”的过程，就需要diff算法")]),t._v(" "),r("p",[t._v("diff实现过程")]),t._v(" "),r("p",[t._v("​\tpatch(container, vnode)\t第一次渲染")]),t._v(" "),r("p",[t._v("​\tpatch(vnode, newVnode)\t更新数据")]),t._v(" "),r("h3",{attrs:{id:"vd-diff-算法"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#vd-diff-算法"}},[t._v("#")]),t._v(" VD diff 算法")]),t._v(" "),r("h4",{attrs:{id:"思路"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#思路"}},[t._v("#")]),t._v(" 思路")]),t._v(" "),r("p",[t._v("一般的设计思路都是页面等于页面状态的映射，即 UI = render(state)。当需要更新页面的时候，无需关系DOM具体的变换方式，只需要改变 state 即可，剩下的事情（render）将由框架代劳。")]),t._v(" "),r("p",[t._v("所以思路就是改变state，生成新的VD - 新的VD与旧的VD进行对比 - 生成差异对象（patch） - 遍历差异对象并更新")]),t._v(" "),r("h2",{attrs:{id:"参考资料"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://mp.weixin.qq.com/s/XRR9afpujcjbgFZM0Zw6Gw",target:"_blank",rel:"noopener noreferrer"}},[t._v("DIff算法看不懂就一起来锤我(带图)"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://juejin.cn/post/6994959998283907102",target:"_blank",rel:"noopener noreferrer"}},[t._v("15张图，20分钟吃透Diff算法核心原理"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/ascoders/weekly/blob/v2/190.%E7%B2%BE%E8%AF%BB%E3%80%8ADOM%20diff%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E3%80%8B.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("精读《DOM diff 原理详解》"),r("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=_.exports}}]);