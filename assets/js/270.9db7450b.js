(window.webpackJsonp=window.webpackJsonp||[]).push([[270],{727:function(e,a,s){"use strict";s.r(a);var t=s(25),r=Object(t.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"cookie、session、token、jwt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie、session、token、jwt"}},[e._v("#")]),e._v(" Cookie、Session、Token、JWT")]),e._v(" "),s("h2",{attrs:{id:"session-介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#session-介绍"}},[e._v("#")]),e._v(" Session 介绍")]),e._v(" "),s("h3",{attrs:{id:"session-的优势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#session-的优势"}},[e._v("#")]),e._v(" Session 的优势")]),e._v(" "),s("ul",[s("li",[e._v("相比 JWT，最大的优势在于可以主动清除 Session")]),e._v(" "),s("li",[e._v("Session 保存在服务器短，相对较为安全")]),e._v(" "),s("li",[e._v("结合 cookie 使用，较为灵活，兼容性较好")])]),e._v(" "),s("h3",{attrs:{id:"session-的劣势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#session-的劣势"}},[e._v("#")]),e._v(" Session 的劣势")]),e._v(" "),s("ul",[s("li",[e._v("cookie + session 在跨域场景表现并不好")]),e._v(" "),s("li",[e._v("如果是分布式部署，需要做多机共享 session 机制")]),e._v(" "),s("li",[e._v("基于 cookie 的机制很容易被 CSRF（跨站请求伪造）")]),e._v(" "),s("li",[e._v("查询 Session 信息可能会有数据库查询操作")])]),e._v(" "),s("h2",{attrs:{id:"jwt介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jwt介绍"}},[e._v("#")]),e._v(" JWT介绍")]),e._v(" "),s("h3",{attrs:{id:"什么是-jwt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是-jwt"}},[e._v("#")]),e._v(" 什么是 JWT")]),e._v(" "),s("p",[e._v("jwt 是 json web token 的圈层，它解决了 session 以上的问题，优点是服务器不保存任何会话数据，即服务器变为无状态，使其更容易扩展")]),e._v(" "),s("h3",{attrs:{id:"jwt的构成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jwt的构成"}},[e._v("#")]),e._v(" JWT的构成")]),e._v(" "),s("p",[e._v("Header（头部）+ Payload（有效载荷）+ Signature（签名）")]),e._v(" "),s("h4",{attrs:{id:"header"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#header"}},[e._v("#")]),e._v(" Header")]),e._v(" "),s("ul",[s("li",[e._v("typ：token 的类型，这里固定位 JWT")]),e._v(" "),s("li",[e._v("alg：使用 hash 算法，例如：RSA、SHA256 或者 HMAC")])]),e._v(" "),s("h4",{attrs:{id:"payload"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payload"}},[e._v("#")]),e._v(" Payload")]),e._v(" "),s("ul",[s("li",[e._v("存储需要传递的信息，如用户ID、用户名等")]),e._v(" "),s("li",[e._v("包含元数据，如过期时间、发布人等")]),e._v(" "),s("li",[e._v("与 Header 不同 Payload 可以加密")])]),e._v(" "),s("h4",{attrs:{id:"signature"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#signature"}},[e._v("#")]),e._v(" Signature")]),e._v(" "),s("ul",[s("li",[e._v("对 Header 和 Payload 部分进行签名")]),e._v(" "),s("li",[e._v("保证 Token 在传输的过程中没有被篡改或者损坏")])]),e._v(" "),s("h3",{attrs:{id:"认证流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#认证流程"}},[e._v("#")]),e._v(" 认证流程")]),e._v(" "),s("ol",[s("li",[e._v("客户端登录时传用户名、密码")]),e._v(" "),s("li",[e._v("服务器拿到用户名和密码后根据算法，生成 token，返回给浏览器")]),e._v(" "),s("li",[e._v("客户端拿到 token 后，存在本地存储中，再请求时带着 token 请求（一般放在 http header 中）")]),e._v(" "),s("li",[e._v("服务器拿着传来的 token ，验证其身份，返回资源")])]),e._v(" "),s("blockquote",[s("p",[e._v("PS：服务器可以在 paylload 设置过期时间，如果过期，可以让客户端重新发起验证")])]),e._v(" "),s("h3",{attrs:{id:"jwt缺点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jwt缺点"}},[e._v("#")]),e._v(" JWT缺点")]),e._v(" "),s("ul",[s("li",[e._v("更多的空间占用")])]),e._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=Mzg5ODA5NTM1Mw==&mid=2247485063&idx=1&sn=82c8ea7a0467a91b8dbbdd950f761fe5&chksm=c0668711f7110e076d9dc265e79c837871cc615ca41a0ab669fdf28f911c1f9245ef8dba042f&mpshare=1&scene=1&srcid=&sharer_sharetime=1582675470189&sharer_shareid=778ad5bf3b27e0078eb105d7277263f6#rd",target:"_blank",rel:"noopener noreferrer"}},[e._v("还分不清 Cookie、Session、Token、JWT"),s("OutboundLink")],1)])]),e._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=Mzg4MTYwMzY1Mw==&mid=2247496330&idx=1&sn=5da74664cd5674e5771059cd5fd1c298&source=41#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[e._v("辩证的眼光搞懂 JWT 这个知识点"),s("OutboundLink")],1)])]),e._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s/bMIIbfbJ1ETt7b419Oaukg",target:"_blank",rel:"noopener noreferrer"}},[e._v("理解 Cookie、Session、Token"),s("OutboundLink")],1)])]),e._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzI1ODE4NzE1Nw==&mid=2247488056&idx=1&sn=d07e95f60604aa2da9aee49b86e6cd5f&chksm=ea0d58c2dd7ad1d45e20a951b8847b63d597a99ade063014e20e79b23162e051ee06f68755d0&scene=126&sessionid=1600412234&key=d3c7cb8eeb23bc83968429e6896fb1b7aba49ba0d6a3b34aff3f5ccb37deb4cb883e7a341562d5ab59ff32b314a331abab775bccc7865ce6c364a77489f8bf91df735ca53b2b3a507b575204e29604b058962fba3a78d88dfc2a238dc84d35749b598b16d8077ecdc6928b0da8787889d8a64251fc1618d27a315f2e46696f5b&ascene=1&uin=MTA0NTY0NDM2MQ%3D%3D&devicetype=Windows+10+x64&version=62090529&lang=zh_CN&exportkey=ATtLISQdbnnQU2A6%2BO3uCSY%3D&pass_ticket=G1%2BpLV9U7UxieEvoe8apJpgtIUKxkgKCK%2Fa%2B3TfiAiVfivJ091UXMCqZfVMTaBn2&wx_header=0",target:"_blank",rel:"noopener noreferrer"}},[e._v("使用NodeJS实现JWT原理"),s("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=r.exports}}]);