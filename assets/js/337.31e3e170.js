(window.webpackJsonp=window.webpackJsonp||[]).push([[337],{795:function(t,a,s){"use strict";s.r(a);var e=s(25),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"http协议原理-实践-web开发工程师必学"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http协议原理-实践-web开发工程师必学"}},[t._v("#")]),t._v(" HTTP协议原理+实践 Web开发工程师必学！")]),t._v(" "),s("p",[t._v("浏览器输入URL后HTTP请求返回的完整过程")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.loli.net/2021/06/03/2YBUohayWfjNKIc.png",alt:"浏览器输入URL后HTTP请求返回的完整过程"}})]),t._v(" "),s("h2",{attrs:{id:"网络协议分层"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络协议分层"}},[t._v("#")]),t._v(" 网络协议分层")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.loli.net/2021/06/03/oD3xifJNZFpmuch.png",alt:"网络协议分层"}})]),t._v(" "),s("p",[t._v("物理层：定义物理设备如何传输数据")]),t._v(" "),s("p",[t._v("数据链路层：在通信的实体间建立数据链路连接")]),t._v(" "),s("p",[t._v("网络层：为数据在节点之间传输创建逻辑链路")]),t._v(" "),s("h4",{attrs:{id:"传输层"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#传输层"}},[t._v("#")]),t._v(" 传输层")]),t._v(" "),s("p",[t._v("向用户提供可靠的端到端（End-to-End）服务")]),t._v(" "),s("p",[t._v("传输层向高层屏蔽了下层数据通信的细节")]),t._v(" "),s("h4",{attrs:{id:"应用层"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用层"}},[t._v("#")]),t._v(" 应用层")]),t._v(" "),s("p",[t._v("为应用软件提供了很多服务")]),t._v(" "),s("p",[t._v("构建于TCP协议之上")]),t._v(" "),s("p",[t._v("屏蔽网络传输相关细节")]),t._v(" "),s("h3",{attrs:{id:"http协议发展历史"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http协议发展历史"}},[t._v("#")]),t._v(" HTTP协议发展历史")]),t._v(" "),s("h4",{attrs:{id:"http-0-9"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-0-9"}},[t._v("#")]),t._v(" HTTP/0.9")]),t._v(" "),s("p",[t._v("只有一个命令GET")]),t._v(" "),s("p",[t._v("没有HEADER等描述数据的信息")]),t._v(" "),s("p",[t._v("服务器发送完毕，关闭TCP连接（现在的http1.1：在一个TCP中能传递多个HTTP）")]),t._v(" "),s("h4",{attrs:{id:"http-1-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-1-0"}},[t._v("#")]),t._v(" HTTP/1.0")]),t._v(" "),s("p",[t._v("增加了很多命令")]),t._v(" "),s("p",[t._v("增加status code 和header")]),t._v(" "),s("p",[t._v("多字符集支持、多部分发送、权限、缓存等")]),t._v(" "),s("h4",{attrs:{id:"http-1-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-1-1"}},[t._v("#")]),t._v(" HTTP/1.1")]),t._v(" "),s("p",[t._v("持久连接")]),t._v(" "),s("p",[t._v("pipeline")]),t._v(" "),s("p",[t._v("增加host和其他一些命令")]),t._v(" "),s("h4",{attrs:{id:"http-2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-2-0"}},[t._v("#")]),t._v(" HTTP/2.0")]),t._v(" "),s("p",[t._v("所有数据以二进制传输")]),t._v(" "),s("p",[t._v("同一个连接里面发送多个请求不再需要按照顺序来")]),t._v(" "),s("p",[t._v("头信息压缩以及推送等提高效率的功能")]),t._v(" "),s("h3",{attrs:{id:"http三次握手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http三次握手"}},[t._v("#")]),t._v(" HTTP三次握手")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/HTTP/HTTP三次握手.png",alt:"HTTP三次握手"}})]),t._v(" "),s("p",[t._v("为什么要三次握手？")]),t._v(" "),s("h3",{attrs:{id:"uri、url、urn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uri、url、urn"}},[t._v("#")]),t._v(" URI、URL、URN")]),t._v(" "),s("h4",{attrs:{id:"uri"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uri"}},[t._v("#")]),t._v(" URI")]),t._v(" "),s("p",[t._v("Uniform Resource Identifier/统一资源标识符")]),t._v(" "),s("p",[t._v("用来标识互联网上的信息资源，唯一")]),t._v(" "),s("p",[t._v("包括URL和URN")]),t._v(" "),s("h4",{attrs:{id:"url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url"}},[t._v("#")]),t._v(" URL")]),t._v(" "),s("p",[t._v("Uniform Resource Locator/统一资源定位器")]),t._v(" "),s("p",[t._v("就是网站地址：http://www.baidu.com")]),t._v(" "),s("p",[t._v("http://user:pass@host.com:80/path?query=string#hash")]),t._v(" "),s("p",[t._v("此类格式的都叫做URL,比如ftp协议（文件协议）")]),t._v(" "),s("h4",{attrs:{id:"urn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#urn"}},[t._v("#")]),t._v(" URN")]),t._v(" "),s("p",[t._v("永久统一资源定位符")]),t._v(" "),s("p",[t._v("在资源移动之后还能被找到")]),t._v(" "),s("p",[t._v("目前还没有非常成熟的使用方案")]),t._v(" "),s("h3",{attrs:{id:"http报文格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http报文格式"}},[t._v("#")]),t._v(" HTTP报文格式")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.loli.net/2021/06/03/dw5P7ODa2oTcYAm.png",alt:"HTTP报文格式"}})]),t._v(" "),s("h4",{attrs:{id:"http的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http的方法"}},[t._v("#")]),t._v(" HTTP的方法")]),t._v(" "),s("p",[t._v("用来定义对于资源的操作")]),t._v(" "),s("p",[t._v("常用的有GET、POST、PUT、DELETE等")]),t._v(" "),s("p",[t._v("从定义上讲有各自的语义")]),t._v(" "),s("h4",{attrs:{id:"http的code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http的code"}},[t._v("#")]),t._v(" HTTP的CODE")]),t._v(" "),s("p",[t._v("定义服务器对请求的处理结果")]),t._v(" "),s("p",[t._v("各个区间的CODE有各自的语义")]),t._v(" "),s("p",[t._v("100：")]),t._v(" "),s("p",[t._v("200：")]),t._v(" "),s("p",[t._v("300：")]),t._v(" "),s("p",[t._v("400：")]),t._v(" "),s("p",[t._v("500：")]),t._v(" "),s("p",[t._v("好的HTTP服务可以通过CODE判断结果")]),t._v(" "),s("h3",{attrs:{id:"第三章-http的各种特性总览"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三章-http的各种特性总览"}},[t._v("#")]),t._v(" 第三章：HTTP的各种特性总览")]),t._v(" "),s("p",[t._v("使用curl来模式客户端请求")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("curl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v www"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baidu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n")])])]),s("p",[t._v("CORS跨域请求的限制与解决")]),t._v(" "),s("p",[t._v("浏览器的同域限制")]),t._v(" "),s("p",[t._v("JSONP")]),t._v(" "),s("p",[t._v("‘Access-Control-Allow-Origin’： ‘*’")]),t._v(" "),s("h4",{attrs:{id:"cors预请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cors预请求"}},[t._v("#")]),t._v(" CORS预请求")]),t._v(" "),s("p",[t._v("允许方法：GET、HEAD、POST")]),t._v(" "),s("p",[t._v("允许Content-Type：text/plain、multipart/form-data、application/x-www-form-urlencoded")]),t._v(" "),s("p",[t._v("其他限制：")]),t._v(" "),s("p",[t._v("请求头限制")]),t._v(" "),s("p",[t._v("XMLHttpRequestUpload 对象均没有任何事件监听器")]),t._v(" "),s("p",[t._v("请求中没有使用 ReadabkeStream 对象")]),t._v(" "),s("p",[t._v("‘Access-Control-Allow-Header’： ‘X-Test-Cors’(头的名字)")]),t._v(" "),s("p",[t._v("允许跨域的头")]),t._v(" "),s("p",[t._v("‘Access-Control-Allow-Header’： ‘POST, PUT, Delete‘")]),t._v(" "),s("p",[t._v("允许跨域的方法")]),t._v(" "),s("p",[t._v("’Access-Control-Max-Age‘: 跨域的最长时间")]),t._v(" "),s("h4",{attrs:{id:"缓存-cache-control"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缓存-cache-control"}},[t._v("#")]),t._v(" 缓存 Cache-Control")]),t._v(" "),s("h5",{attrs:{id:"特性-值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特性-值"}},[t._v("#")]),t._v(" 特性（值）:")]),t._v(" "),s("h5",{attrs:{id:"可缓存性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可缓存性"}},[t._v("#")]),t._v(" 可缓存性")]),t._v(" "),s("p",[t._v("​\t\tpublic")]),t._v(" "),s("p",[t._v("​\t\tprivate")]),t._v(" "),s("p",[t._v("​\t\tno-cache")]),t._v(" "),s("p",[t._v("​\t"),s("strong",[t._v("到期")])]),t._v(" "),s("p",[t._v("​\t\tmax-age="),s("code",[t._v("<seconds>")])]),t._v(" "),s("p",[t._v("​\t\ts-maxage="),s("code",[t._v("<seconds>")]),t._v(" 代理服务器")]),t._v(" "),s("p",[t._v("​\t\tmax-stale="),s("code",[t._v("<seconds>")])]),t._v(" "),s("p",[t._v("​\t"),s("strong",[t._v("重新验证")])]),t._v(" "),s("p",[t._v("​\t\tmust-revalidate")]),t._v(" "),s("p",[t._v("​\t\tproxy-revalidate")]),t._v(" "),s("p",[t._v("​\t"),s("strong",[t._v("其他")])]),t._v(" "),s("p",[t._v("​\t\tno-store 不能用缓存")]),t._v(" "),s("p",[t._v("​\t\tno-transform\t不允许改动内容")]),t._v(" "),s("p",[t._v("’Cache-Control‘： ’max-age=200‘ 就能缓存住，")]),t._v(" "),s("p",[t._v("前端构建工具（例如webpack）在打包时会构建出hash值。如果hash值没变，就用缓存，hash值改变（即我们写的新业务）需要用户来读取")]),t._v(" "),s("h4",{attrs:{id:"缓存验证last-modified和etag的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缓存验证last-modified和etag的使用"}},[t._v("#")]),t._v(" 缓存验证Last-Modified和Etag的使用")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.loli.net/2021/06/03/W7tXPNZ5kuYoL6A.png",alt:"缓存验证Last-Modified和Etag的使用"}})]),t._v(" "),s("p",[t._v("验证头：Last-Modified、Etag")]),t._v(" "),s("h4",{attrs:{id:"last-modified"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#last-modified"}},[t._v("#")]),t._v(" Last-Modified")]),t._v(" "),s("p",[t._v("上次修改时间")]),t._v(" "),s("p",[t._v("配合If-Modified-Since或者If-Unmodified-Since使用")]),t._v(" "),s("p",[t._v("对比上次修改时间以验证资源是否需要更新")]),t._v(" "),s("h5",{attrs:{id:"etag"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#etag"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Etag")])]),t._v(" "),s("p",[t._v("数据签名")]),t._v(" "),s("p",[t._v("配合If-Match或者If-Non-Match使用")]),t._v(" "),s("p",[t._v("对比资源的签名判断是否使用缓存（webpack里的hash就是用这个原理）")]),t._v(" "),s("h4",{attrs:{id:"cookie和session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie和session"}},[t._v("#")]),t._v(" Cookie和Session")]),t._v(" "),s("h5",{attrs:{id:"cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" cookie")]),t._v(" "),s("p",[t._v("通过Set-Cookie设置")]),t._v(" "),s("p",[t._v("下次请求会自动带上")]),t._v(" "),s("p",[t._v("键值对，可以设置多个")]),t._v(" "),s("h5",{attrs:{id:"cookie的属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie的属性"}},[t._v("#")]),t._v(" cookie的属性")]),t._v(" "),s("p",[t._v("max-age和expires设置过期时间")]),t._v(" "),s("p",[t._v("Secure只有https的时候发送")]),t._v(" "),s("p",[t._v("HttpOnly无法通过document.cookie访问")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id=123;max-age=10'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'abc=456, domain=test.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("Domain：让同域名下的两个子网站之间的cookie通讯")]),t._v(" "),s("h3",{attrs:{id:"http长连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http长连接"}},[t._v("#")]),t._v(" HTTP长连接")]),t._v(" "),s("p",[t._v("一个tcp连接中能发送多个http请求")]),t._v(" "),s("p",[t._v("HTTP的长连接是建立在tcp的基础上，chrome浏览器最多支持6个http请求（公用一个tcp连接）")]),t._v(" "),s("p",[t._v("在http header里写")]),t._v(" "),s("p",[t._v("Connection：keep-Alive")]),t._v(" "),s("h3",{attrs:{id:"数据协商"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据协商"}},[t._v("#")]),t._v(" 数据协商")]),t._v(" "),s("h4",{attrs:{id:"分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分类"}},[t._v("#")]),t._v(" 分类")]),t._v(" "),s("p",[t._v("请求（request）")]),t._v(" "),s("p",[t._v("返回（response）")]),t._v(" "),s("p",[t._v("request 中的 Accept")]),t._v(" "),s("p",[t._v("Accept：数据类型")]),t._v(" "),s("p",[t._v("Accept-Encoding：编码方式")]),t._v(" "),s("p",[t._v("Accept-Language：语言")]),t._v(" "),s("p",[t._v("User-Agent：浏览器信息")]),t._v(" "),s("p",[t._v("response 中的 Content")]),t._v(" "),s("p",[t._v("Content-Type: 数据格式")]),t._v(" "),s("p",[t._v("Content-Encoding: 编码方式 "),s("code",[t._v("gzip")])]),t._v(" "),s("p",[t._v("Content-Language：语言")]),t._v(" "),s("h4",{attrs:{id:"redirect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redirect"}},[t._v("#")]),t._v(" Redirect")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("302")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Location'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/new'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/new'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<div>hello,world</div>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("HTTP 状态码：")]),t._v(" "),s("p",[t._v("302 临时跳转")]),t._v(" "),s("p",[t._v("301 永久跳转 （谨慎，你使用了之后就不好控制了）")]),t._v(" "),s("h3",{attrs:{id:"nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" Nginx")]),t._v(" "),s("div",{staticClass:"language-nginx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nginx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v(" \t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v(" test.com\n\t\n\tlocation /")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_pass")]),t._v(" http://127.0.0.1:888")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_set_header")]),t._v(" Host "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t// 修改头\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("代理缓存")]),t._v(" "),s("p",[t._v("服务器中的Cache-Control:s-maxage 给代理缓存用")]),t._v(" "),s("p",[t._v("no-store 永不缓存")]),t._v(" "),s("p",[t._v("HTTP 头 Vary\thttp头信息一样才缓存")]),t._v(" "),s("h3",{attrs:{id:"https解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#https解析"}},[t._v("#")]),t._v(" HTTPS解析")]),t._v(" "),s("h4",{attrs:{id:"加密"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加密"}},[t._v("#")]),t._v(" 加密")]),t._v(" "),s("p",[t._v("私钥和公钥")]),t._v(" "),s("p",[t._v("在nginx中配置https")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.loli.net/2021/06/03/oai5XeD2pWjNUsJ.png",alt:"在nginx中配置https"}})]),t._v(" "),s("h3",{attrs:{id:"http2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http2"}},[t._v("#")]),t._v(" HTTP2")]),t._v(" "),s("h4",{attrs:{id:"优势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优势"}},[t._v("#")]),t._v(" 优势")]),t._v(" "),s("p",[t._v("信道复用")]),t._v(" "),s("p",[t._v("分帧传输")]),t._v(" "),s("p",[t._v("Server Push")]),t._v(" "),s("div",{staticClass:"language-nginx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nginx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v(" \t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v(" http2；\n    server_name test.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("http2_push_preload")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("on")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("http/1.1 和 http2 对比网站")]),t._v(" "),s("p",[t._v("https://http2.akamai.com/demo")])])}),[],!1,null,null,null);a.default=r.exports}}]);