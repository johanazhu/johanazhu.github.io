(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{440:function(t,a,n){t.exports=n.p+"assets/img/执行上下文周期.471e98cf.png"},441:function(t,a,n){t.exports=n.p+"assets/img/执行上下文的构成.469872ac.png"},442:function(t,a,n){t.exports=n.p+"assets/img/执行上下文中的词法环境.3625fb10.png"},443:function(t,a){t.exports="data:image/png;base64,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"},444:function(t,a,n){t.exports=n.p+"assets/img/在chrome中查看执行上下文栈.2cc61bab.png"},657:function(t,a,n){"use strict";n.r(a);var s=n(25),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"执行上下文与调用栈"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行上下文与调用栈"}},[t._v("#")]),t._v(" 执行上下文与调用栈")]),t._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[t._v("在说一个概念前，我们需要确定它的前提，此文以ECMAScript5为基础撰写")]),t._v(" "),s("h2",{attrs:{id:"一句话解释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一句话解释"}},[t._v("#")]),t._v(" 一句话解释")]),t._v(" "),s("p",[t._v("执行上下文就是一段代码执行时所带的所有信息")]),t._v(" "),s("h2",{attrs:{id:"执行上下文是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行上下文是什么"}},[t._v("#")]),t._v(" 执行上下文是什么")]),t._v(" "),s("p",[t._v("《重学前端》的作者winter 曾经对什么是执行上下文做过这样的解释：")]),t._v(" "),s("blockquote",[s("p",[t._v("JavaScript标准把一段代码（包括函数），执行所需的所有信息定义为：“执行上下文")])]),t._v(" "),s("p",[t._v("并且他整理出在不同ECMAScript版本中执行上下文所代表的含义，")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("执行上下文在ES3中")]),t._v("，包含三个部分。")]),t._v(" "),s("ul",[s("li",[t._v("scope：作用域，也常常被叫做作用域链")]),t._v(" "),s("li",[t._v("variable object：变量对象，用来存储变量的对象")]),t._v(" "),s("li",[t._v("this value： this值")])]),t._v(" "),s("p",[s("strong",[t._v("在ES5中")]),t._v("，我们改进了命名方式，把执行上下文最初的三个部分改成下面这个样子")]),t._v(" "),s("ul",[s("li",[t._v("lexical environment：词法环境，当获取变量时使用")]),t._v(" "),s("li",[t._v("variable environment：变量环境，当声明变量时使用")]),t._v(" "),s("li",[t._v("this value： this值")])]),t._v(" "),s("p",[s("strong",[t._v("在ES2018中")]),t._v("，执行上下文又变成了这个样子，this值被归入 lexical environment，但是增加了不少内容")]),t._v(" "),s("ul",[s("li",[t._v("lexical environment：词法环境，当获取变量或者this值时使用")]),t._v(" "),s("li",[t._v("variable environment：变量环境，当声明变量时使用")]),t._v(" "),s("li",[t._v("code evaluation state: 用于恢复代码执行位置")]),t._v(" "),s("li",[t._v("Function：执行的任务是函数时使用，表示正在被执行的函数")]),t._v(" "),s("li",[t._v("ScriptOrModule：执行的任务是脚本或者模块时使用，表示正在被执行的代码")]),t._v(" "),s("li",[t._v("Realm：使用的基础库和内置对象实力")]),t._v(" "),s("li",[t._v("Generator：仅生成器上下文有这个属性，表示当前生成器")])])]),t._v(" "),s("p",[t._v("总结的很完整，按照 "),s("code",[t._v("选新不选旧")]),t._v(" 原则，本文应该以 ES2021为切入点展开，最次也要 ES2018，但主流的解释执行上下文都以 ES3 为例，权衡之后，笔者将以 ES5 为基础撰写执行上下文，并在后续补充说明 ES3 中的执行上下文")]),t._v(" "),s("h2",{attrs:{id:"执行生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行生命周期"}},[t._v("#")]),t._v(" 执行生命周期")]),t._v(" "),s("p",[t._v("我们在讲 "),s("RouterLink",{attrs:{to:"/JavaScript/词法环境.html"}},[t._v("词法环境")]),t._v(" 时，曾经画过一张执行生命周期图，当时所讲的词法环境是在"),s("strong",[t._v("编译阶段")]),t._v("产生，现在讲的执行上下文是在引擎"),s("strong",[t._v("执行阶段")]),t._v("进行。")],1),t._v(" "),s("p",[t._v("一段代码如果要执行，首先会往调用栈（call stack）中压入全局执行上下文；再创建词法环境，此时变量该提升提升，函数该提升提升，并将这些变量登记到词法环境中（编译阶段）；接着进入执行阶段，执行可执行代码，该赋值赋值，遇到函数，就创建一个函数执行上下文，并往调用栈中压入该函数的执行上下文；而后创建该函数的词法环境，当该函数执行完后，从调用栈中弹出；反复循环，到最后调用栈中只剩一个全局执行上下文，除非你关闭浏览器，不然全局执行上下文不会弹出")]),t._v(" "),s("p",[t._v("我们要往调用栈中压入执行上下文，调用栈的数据结构为 "),s("code",[t._v("栈")]),t._v(" 。特点为先进后出。")]),t._v(" "),s("p",[t._v("如果我们的代码是这样的")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("baz")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("baz")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("那么执行过程应该是这样：")]),t._v(" "),s("p",[s("img",{attrs:{src:n(440),alt:"执行上下文-example"}})]),t._v(" "),s("p",[t._v("图中的蓝色方块为 "),s("code",[t._v("执行上下文")]),t._v(" ，外面黑框白底的区域就是模拟 "),s("code",[t._v("调用栈")]),t._v("。整个过程遵循先进后出的原则")]),t._v(" "),s("ul",[s("li",[t._v("在任何代码执行之前，先创建全局执行上下文，并往调用栈中压栈（编译阶段）")]),t._v(" "),s("li",[t._v("创建词法环境，登记函数声明和变量声明（编译阶段）")]),t._v(" "),s("li",[t._v("引擎执行到 "),s("code",[t._v("baz()")]),t._v(" ，创建 "),s("code",[t._v("baz()")]),t._v(" 的函数执行上下文，并往调用栈中压栈")]),t._v(" "),s("li",[t._v("函数 "),s("code",[t._v("baz()")]),t._v(" 调用 "),s("code",[t._v("foo()")]),t._v(" ，创建 "),s("code",[t._v("foo()")]),t._v(" 执行上下文，并将其压入调用栈中，")]),t._v(" "),s("li",[t._v("函数 "),s("code",[t._v("foo()")]),t._v(" 调用 "),s("code",[t._v("bar()")]),t._v(" ，创建"),s("code",[t._v("bar()")]),t._v(" 执行上下文，并将其压入调用栈，")]),t._v(" "),s("li",[t._v("函数 "),s("code",[t._v("bar()")]),t._v(" 执行"),s("code",[t._v("console.log()")]),t._v(" ，同理将其压入调用栈，")]),t._v(" "),s("li",[t._v("执行完"),s("code",[t._v("console.log()")]),t._v("后，被弹出")]),t._v(" "),s("li",[t._v("函数 "),s("code",[t._v("bar()")]),t._v(" 执行完毕，弹出调用栈")]),t._v(" "),s("li",[t._v("函数 "),s("code",[t._v("foo()")]),t._v(" 也执行完毕，弹出调用栈")]),t._v(" "),s("li",[t._v("函数 "),s("code",[t._v("baz()")]),t._v(" 同样执行完毕，弹出调用栈")])]),t._v(" "),s("p",[t._v("只剩下全局执行上下文，留在栈底")]),t._v(" "),s("p",[t._v("在这里，我们看到 "),s("code",[t._v("console.log()")]),t._v(" 也被压入到执行栈中，不禁有个思考，哪些代码元素会被执行到调用栈中呢？")]),t._v(" "),s("h2",{attrs:{id:"可执行代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可执行代码"}},[t._v("#")]),t._v(" 可执行代码")]),t._v(" "),s("p",[t._v("事实上，不仅仅是 function 可以作为执行上下文在执行栈中运行，在 JavaScript 里定义了四种可执行代码：")]),t._v(" "),s("ul",[s("li",[t._v("global code：整个 js 文件")]),t._v(" "),s("li",[t._v("function code：函数代码")]),t._v(" "),s("li",[t._v("module：模块代码")]),t._v(" "),s("li",[t._v("eval code：放在 eval 的代码")])]),t._v(" "),s("p",[t._v("所以才会看到 "),s("code",[t._v("console.log()")]),t._v(" 被压入调用栈中，因为它属于 global code")]),t._v(" "),s("h2",{attrs:{id:"执行步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行步骤"}},[t._v("#")]),t._v(" 执行步骤")]),t._v(" "),s("p",[t._v("JS 引擎室按照可执行代码来执行代码的，每次执行步骤如下：")]),t._v(" "),s("ol",[s("li",[t._v("创建一个新的执行上下文（Execution Context）")]),t._v(" "),s("li",[t._v("创建一个新的词法环境（Lexical Environment）")]),t._v(" "),s("li",[t._v("把 LexicalEnvironment 和 VariableEnvironment 指向新创建的词法环境")]),t._v(" "),s("li",[t._v("把这个执行上下文压入执行栈并成为正在运行的执行上下文")]),t._v(" "),s("li",[t._v("执行代码")]),t._v(" "),s("li",[t._v("执行结束后，把这个执行上下文弹出执行栈")])]),t._v(" "),s("h2",{attrs:{id:"如何创建执行上下文"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何创建执行上下文"}},[t._v("#")]),t._v(" 如何创建执行上下文")]),t._v(" "),s("p",[t._v("到现在，我们已经知道 JavaScript 是如何管理执行上下文的，现在让我们了解一下 JavaScript 引擎是怎样创建执行上下文的")]),t._v(" "),s("p",[t._v("创建执行上下文有两个阶段："),s("strong",[t._v("1) 创建阶段")]),t._v(" 和 "),s("strong",[t._v("2) 执行阶段")])]),t._v(" "),s("h2",{attrs:{id:"创建阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建阶段"}},[t._v("#")]),t._v(" 创建阶段")]),t._v(" "),s("p",[t._v("在 JavaScript 代码执行前，执行上下文将经历创建阶段。在创建阶段会发生以下三件事：")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("this")]),t._v(" 值的确定，即我们所熟知的 "),s("strong",[t._v("this 绑定")]),t._v("。")])]),t._v(" "),s("li",[s("p",[t._v("创建"),s("strong",[t._v("词法环境组件（LexicalEnvironment component ）")])])]),t._v(" "),s("li",[s("p",[t._v("创建"),s("strong",[t._v("变量环境组件（VariableEnvironment component ）")])])])]),t._v(" "),s("p",[t._v("所以执行上下文在概念上表示如下：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("ExecutionContext "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ThisBinding "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    LexicalEnvironment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    VariableEnvironment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("这里需要再多嘴一句：")]),t._v(" "),s("p",[t._v("在很多文章中我们看到 执行上下文 只有 LexicalEnvironment 和 VariableEnvironment ，并没有this。那是因为在 ES2018 后，this 就归纳到 LexicalEnvironment （如上文winter所说），但本文是以 ES5 为基础撰写，故此版本的执行上下文中是有 this 的")]),t._v(" "),s("h3",{attrs:{id:"this-绑定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-绑定"}},[t._v("#")]),t._v(" this 绑定")]),t._v(" "),s("p",[t._v("this的指向很简单，谁调用我，我只想谁")]),t._v(" "),s("p",[t._v("在执行上下文中，this 就指向那个调用者")]),t._v(" "),s("h3",{attrs:{id:"词法环境组件-和-变量环境组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#词法环境组件-和-变量环境组件"}},[t._v("#")]),t._v(" 词法环境组件 和 变量环境组件")]),t._v(" "),s("p",[t._v("这两”姐妹“有点像，只是分工不同。")]),t._v(" "),s("p",[s("strong",[t._v("变量环境组件（VariableEnvironment component ）")]),t._v(" 用来登记 "),s("code",[t._v("var")]),t._v(" 、"),s("code",[t._v("function")]),t._v(" 等变量声明")]),t._v(" "),s("p",[s("strong",[t._v("词法环境组件（LexicalEnvironment component ）")]),t._v(" 用来登记 "),s("code",[t._v("let")]),t._v(" 、"),s("code",[t._v("const")]),t._v("  、"),s("code",[t._v("class")]),t._v(" 等变量声明")]),t._v(" "),s("p",[t._v("按上例可以这么画图：")]),t._v(" "),s("p",[s("img",{attrs:{src:n(441),alt:"执行上下文-example"}})]),t._v(" "),s("p",[s("code",[t._v("LexicalEnvironment")]),t._v(" 和 "),s("code",[t._v("VariableEnvironment")]),t._v(" 则都是词法环境（Lexical Environment）。很多文章中常把 "),s("code",[t._v("LexicalEnvironment")]),t._v("  理解成 "),s("strong",[s("RouterLink",{attrs:{to:"/JavaScript/词法环境.html"}},[t._v("词法环境")])],1),t._v("，这是不对的，"),s("code",[t._v("LexicalEnvironment")]),t._v(" 是一个单词，表示执行上下文中的是标识 "),s("code",[t._v("let")]),t._v(" 、"),s("code",[t._v("const")]),t._v("  、"),s("code",[t._v("class")]),t._v(" 等变量声明，而 "),s("code",[t._v("VariableEnvironment")]),t._v(" 则是标识 "),s("code",[t._v("var")]),t._v(" 、"),s("code",[t._v("function")]),t._v("  等变量声明")]),t._v(" "),s("p",[t._v("如果非要用中文来表示"),s("code",[t._v("LexicalEnvironment")]),t._v(" 的话，我更愿意用 "),s("strong",[t._v("词法环境组件")]),t._v(" 来表示；同理，"),s("code",[t._v("VariableEnvironment")]),t._v(" 则用 "),s("strong",[t._v("变量环境组件")]),t._v(" 来表示")]),t._v(" "),s("p",[t._v("对我而言，变量环境组件和词法环境组件就好比”装黄豆瓶“和”装绿豆瓶“，一个负责装黄豆（var，function），一个负责装绿豆（let，const，class），它们指向词法环境，本质是从词法环境中拿数据。")]),t._v(" "),s("p",[t._v("所以无论是词法环境组件还是变量环境组件，都有一个环境记录器和一个outer对象，其中环境记录器记录变量，outer指向父级作用域")]),t._v(" "),s("p",[t._v("具体可以看 "),s("a",{attrs:{href:"https://262.ecma-international.org/6.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ECMAScript 6 标准中的第八节"),s("OutboundLink")],1),t._v(" 详细了解一下")]),t._v(" "),s("p",[t._v("回头看上述例子：")]),t._v(" "),s("p",[s("img",{attrs:{src:n(442),alt:"执行上下文-example"}})]),t._v(" "),s("p",[s("code",[t._v("bar()")]),t._v(" 函数中的 "),s("code",[t._v("console.log(a)")]),t._v(" ，本环境记录器中找不到，就引着 "),s("code",[t._v("outer")]),t._v(" 找，在 window 中找到变量 a ，赋值后，弹出，"),s("code",[t._v("foo()")]),t._v(" 执行完后也弹出，"),s("code",[t._v("baz()")]),t._v(" 执行完弹出，留下全局执行上下文在栈底")]),t._v(" "),s("p",[t._v("之前在说 "),s("RouterLink",{attrs:{to:"/JavaScript/词法环境.html"}},[t._v("词法环境")]),t._v(" 时，我们曾下过这样的定义："),s("strong",[t._v("outer 就是指向词法环境的父级词法环境（作用域）")])],1),t._v(" "),s("p",[t._v("但是本人有一点不是很明白，outer 既然指词法环境的父级作用域，那 "),s("code",[t._v("作用域链")]),t._v(" 从那里来？")]),t._v(" "),s("p",[t._v("以上面的 demo 为例，bar 的执行上下文的伪代码：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("BarExecutionContext "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ThisBinding "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Global Object"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    LexicalEnvironment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n   \t\tEnvironmentRecord"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        outer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("FooLexicalEnvironment"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    VariableEnvironment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        EnvironmentRecord"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        outer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("FooLexicalEnvironment"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("bar 的 outer 指向 "),s("code",[t._v("foo")]),t._v(" 执行上下文， "),s("code",[t._v("foo")]),t._v(" 的 outer 指向 window，变量先从当前执行作用域查找变量，如果找不到，就引着 outer 继续查找。这一过程中，bar作用域—foo作用域—window作用域。")]),t._v(" "),s("p",[t._v("当代码要访问一个变量时——首先会搜索当前词法环境，然后搜索外部环境，然后搜索更外部的环境，以此类推，直到全局词法环境。")]),t._v(" "),s("p",[t._v("而我们潜意识中的”作用域链“是在ES3中的才有的，因为那个时候的执行上下文中有scope（作用域），当前作用域找不到变量，就往外层作用域中找，然后再到更外层的作用域找，知道全局作用域，作用域与作用域之间以"),s("strong",[t._v("链表")]),t._v("的形式连接着，这就是作用域链。")]),t._v(" "),s("h2",{attrs:{id:"执行上下文有几种"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行上下文有几种"}},[t._v("#")]),t._v(" 执行上下文有几种？")]),t._v(" "),s("p",[t._v("分三种")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("全局执行上下文")])]),t._v(" "),s("li",[s("p",[t._v("函数执行上下文")])]),t._v(" "),s("li",[s("p",[t._v("eval执行上下文")])])]),t._v(" "),s("h2",{attrs:{id:"ecmascript3-中的执行上下文"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript3-中的执行上下文"}},[t._v("#")]),t._v(" ECMAScript3 中的执行上下文")]),t._v(" "),s("p",[t._v("如果你喜欢看有关执行上下文的文章，应该常看到这样的描述，执行上下文由变量对象（Variable object，VO）、作用域链（Scope chain） , this 构成。")]),t._v(" "),s("p",[t._v("其实我们可以把 变量对象（VO） 看成是 ES5 中的 词法环境，scope 为 词法环境中的 outer")]),t._v(" "),s("h2",{attrs:{id:"如何追踪执行上下文栈"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何追踪执行上下文栈"}},[t._v("#")]),t._v(" 如何追踪执行上下文栈")]),t._v(" "),s("p",[t._v("例如：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo4'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("得到错误提示如图：")]),t._v(" "),s("p",[s("img",{attrs:{src:n(443),alt:"执行上下文-example"}})]),t._v(" "),s("p",[t._v("或者在 Chrome 中执行代码，打断点得到：")]),t._v(" "),s("p",[s("img",{attrs:{src:n(444),alt:"执行上下文-example"}})]),t._v(" "),s("h2",{attrs:{id:"关于变量与活动对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关于变量与活动对象"}},[t._v("#")]),t._v(" 关于变量与活动对象")]),t._v(" "),s("p",[t._v("笔者最开始了解执行上下文、执行上下文栈以及闭包时，大家是用变量对象和互动对象来解释的，即")]),t._v(" "),s("p",[t._v("XXX")]),t._v(" "),s("p",[t._v("在开头的时候笔者已经强调过，以ES5为标准展开。")]),t._v(" "),s("p",[t._v("简单来说，变量对象是与执行上下文相关的数据作用域，存储了在上下文中定义的变量和函数声明。而在函数上下文中，我们用活动对象（activation object，AO）来表示变量对象")]),t._v(" "),s("p",[t._v("作用域在预编译阶段确定，但是作用域链是在执行上下文的创建阶段完成生产的。因为函数在调用时，才会开始创建对应的执行上下文。执行上下文包括了：变量对象、作用域链以及 "),s("code",[t._v("this")]),t._v(" 的指向")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("执行上下文可以理解为函数的执行环境，当函数执行时，都会创建一个执行环境")]),t._v(" "),s("p",[t._v("每次只能有一个执行上下文处于运行状态，因为 JavaScript 是单线程语言，它由执行栈或（叫）调用栈来管理")]),t._v(" "),s("p",[t._v("创建一个函数，就生成了一个作用域（对吗）")]),t._v(" "),s("p",[t._v("执行上下文创建阶段分为绑定this，创建词法环境，变量环境三步")]),t._v(" "),s("p",[t._v("调用函数时，创建一个新的词法环境")]),t._v(" "),s("p",[t._v("词法环境这个说法，是ES5规范中的内容，可以理解为 ES3中的变量对象，scope 为 词法环境中的 outer")]),t._v(" "),s("p",[t._v("在ES5中，"),s("strong",[t._v("词法环境")]),t._v(" 和 "),s("strong",[t._v("变量环境")]),t._v(" 的一个不同就是前者被用来存储函数声明和变量（"),s("code",[t._v("let")]),t._v(" 和 "),s("code",[t._v("const")]),t._v("）绑定，而后者只用来存储 "),s("code",[t._v("var")]),t._v(" 变量绑定")]),t._v(" "),s("h2",{attrs:{id:"q-a"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#q-a"}},[t._v("#")]),t._v(" Q&A")]),t._v(" "),s("p",[t._v("Q：是不是说在定义时确认了作用域，在调用时确认了作用域链？")]),t._v(" "),s("p",[t._v("A： yes，这里需要注意的是每一个执行上下文都会进行提升操作")]),t._v(" "),s("p",[t._v("Q： ES5 中的执行上下文的词法环境和编译阶段的词法环境有什么不同？")]),t._v(" "),s("p",[t._v("A：一段 JavaScript 代码在执行之前需要被 JavaScript 引擎编译，编译完成之后，才会进行执行阶段，大致流程如下：\n"),s("img",{attrs:{src:"https://i.loli.net/2021/05/08/tyq8YZBsQSPWkf4.png",alt:"JavaScript 的执行流程图"}})]),t._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"https://github.com/xitu/gold-miner/blob/master/TODO1/understanding-execution-context-and-execution-stack-in-javascript.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("理解 JavaScript 中的执行上下文和执行栈"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://blog.bitsrc.io/understanding-execution-context-and-execution-stack-in-javascript-1c9ea8642dd0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Understanding Execution Context and Execution Stack in JavaScript"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://262.ecma-international.org/6.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方ES"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s/Ad7L8j9ezj_g1xTa0wAMHQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript 执行上下文 · 变量对象"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://gitbook.cn/gitchat/column/5c91c813968b1d64b1e08fde/topic/5c99a9a3ccb24267c1d01960",target:"_blank",rel:"noopener noreferrer"}},[t._v("老司机也会在闭包相关知识点翻车（上）"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/echolun/p/11438363.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("一篇文章看懂JS执行上下文"),s("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=e.exports}}]);